(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{283:function(e,t,n){e.exports=n(463)},463:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(70),c=n.n(o),i=(n(288),n(20)),l=n(21),u=n(23),s=n(22),d=n(24),m="kolmech-token",p=n(238),f=n.n(p);function h(e){var t=function(e){var t=f()(e);if(!t.exp)return null;var n=new Date(0);return n.setUTCSeconds(t.exp),n}(e);return null!==t&&(console.log(t,(new Date).valueOf()+0),!(t.valueOf()>(new Date).valueOf()+0))}var b=n(30),v=n(14),g=n(33),E=n.n(g);function O(){var e=Object(v.a)(["\n\tmutation Login($email: String!, $password: String!) {\n\t\tlogin(email: $email, password: $password) {\n\t\t\ttoken\n\t\t}\n\t}\n"]);return O=function(){return e},e}function j(){var e=Object(v.a)(["\n\tquery MeLocal {\n\t\tme @client {\n\t\t\tperson {\n\t\t\t\tfName\n\t\t\t\tlName\n\t\t\t}\n\t\t}\n\t}\n"]);return j=function(){return e},e}function y(){var e=Object(v.a)(["\n\tquery Me {\n\t\tme {\n\t\t\tid\n\t\t\temail\n\t\t\tperson {\n\t\t\t\tfName\n\t\t\t\tlName\n\t\t\t}\n\t\t}\n\t}\n"]);return y=function(){return e},e}var x=E()(y()),k=(E()(j()),E()(O())),w=n(52),C=n.n(w),S=n(72),I=n(43),D=n(17),P=n(486),T=n(488),q=n(478),z=n(483),A=n(485);function B(){var e=Object(v.a)(["\n\tmax-width: 350px !important;\n\tmargin: auto !important;\n"]);return B=function(){return e},e}function M(){var e=Object(v.a)(["\n\tdisplay: inline;\n\tpadding: 0 1rem !important;\n"]);return M=function(){return e},e}function N(){var e=Object(v.a)(["\n\tborder-bottom: 1px solid #7e7e81;\n\t// height: 35px;\n"]);return N=function(){return e},e}var R=D.a.div(N()),L=Object(D.a)(P.a)(M()),$=Object(D.a)(T.a)(B()),F=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).state={email:"",password:"",sendingRequest:!1,error:""},n.handleInputChange=function(e){n.setState(Object(I.a)({},e,n[e].value))},n.submit=Object(S.a)(C.a.mark(function e(){var t,a,r,o,c;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=n.state,a=t.email,r=t.password,n.setState({sendingRequest:!0}),e.next=5,n.props.login({variables:{email:a,password:r}});case 5:o=e.sent,c=o.data.login.token,n.setState({sendingRequest:!1}),n.props.refreshToken(c),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),n.setState({error:e.t0.message,sendingRequest:!1});case 14:case"end":return e.stop()}},e,this,[[0,11]])})),n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.state,n=t.email,o=t.password,c=t.sendingRequest,i=t.error;return r.a.createElement(a.Fragment,null,r.a.createElement(R,null,r.a.createElement(L,{size:"large"},r.a.createElement("i",null,"\u041f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u044f \u043d\u0430 \u0443\u0447\u0430\u0441\u0442\u043a\u0430\u0445"))),r.a.createElement($,{basic:!0},r.a.createElement(q.a,{error:!!i},r.a.createElement(q.a.Field,null,r.a.createElement("label",null,"E-mail"),r.a.createElement("input",{type:"email",placeholder:"E-mail",ref:function(t){return e.email=t},onChange:function(){return e.handleInputChange("email")}})),r.a.createElement(q.a.Field,null,r.a.createElement("label",null,"\u041f\u0430\u0440\u043e\u043b\u044c"),r.a.createElement("input",{type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",ref:function(t){return e.password=t},onChange:function(){return e.handleInputChange("password")}})),r.a.createElement(z.a,{error:!0,header:"\u0412\u043e\u0439\u0442\u0438 \u043d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c..",content:i}),r.a.createElement(A.a,{primary:!0,type:"submit",floated:"right",disabled:!n||!o||c,loading:c,onClick:this.submit},"\u0412\u043e\u0439\u0442\u0438"))))}}]),t}(a.Component),Q=Object(b.compose)(Object(b.graphql)(k,{name:"login",options:{fetchPolicy:"no-cache"}}))(F),W=n(39),H=n(28),Y=n.n(H);function G(){var e=Object(v.a)(["\n  fragment myDept on Dept {\n    id\n    name\n    type\n    prods {\n      id\n      melt\n      meltShift\n      number\n      year\n      isSpoiled\n      hasDefect\n      progress\n      htmlNote\n      model {\n        id\n        name\n        article\n      }\n      order {\n        id\n        fullnum\n      }\n    }\n  }\n"]);return G=function(){return e},e}function J(){var e=Object(v.a)(["\n  query AllDepts {\n    depts {\n      id\n      name\n      type\n      prods {\n        id\n        melt\n        meltShift\n        number\n        year\n        isSpoiled\n        hasDefect\n        progress\n        htmlNote\n        model {\n          id\n          name\n          article\n        }\n        order {\n          id\n          fullnum\n        }\n      }\n    }\n  }\n"]);return J=function(){return e},e}var U=E()(J()),X=E()(G());function _(){var e=Object(v.a)(["\n  mutation moveProds ( $to: ID!, $prodIds: [ID!]! ) {\n    moveProds (\n      to: $to,\n      prodIds: $prodIds\n    ) {\n      prods {\n        id\n        dept {\n          id\n        }\n      }\n      to\n    }\n  }\n"]);return _=function(){return e},e}function K(){var e=Object(v.a)(["\n  mutation UpsertProd ($input: ProdInput!) {\n    upsertProd(input: $input) {\n      id\n      melt\n      meltShift\n      number\n      year\n      isSpoiled\n      hasDefect\n      progress\n      htmlNote\n      model {\n        id\n        name\n        article\n      }\n      dept {\n        id\n      }\n      order {\n        id\n        fullnum\n      }\n    }\n  }\n"]);return K=function(){return e},e}var Z=E()(K()),V=E()(_()),ee=n(477),te=n(484),ne=n(152),ae=n(480),re=n(76),oe=n(479),ce=n(258),ie=n(40),le=n(487),ue=n(475);function se(){var e=Object(v.a)(["\n\t&&&& {\n\t\t","\n\t}\n"]);return se=function(){return e},e}function de(){var e=Object(v.a)(["\n\t&&&& {\n\t\t","\n\t}\n"]);return de=function(){return e},e}function me(){var e=Object(v.a)(["\n\t&&&& {\n\t\t","\n\t}\n"]);return me=function(){return e},e}function pe(){var e=Object(v.a)(["\n\t","\n\twidth: "," !important;\n\tmargin-right: 0 !important;\n"]);return pe=function(){return e},e}function fe(){var e=Object(v.a)(["\n\t&&& {\n\t\t","\n\t}\n"]);return fe=function(){return e},e}function he(){var e=Object(v.a)(["\n\twidth: 100%;\n\tpadding: 1em 1em 1em 55px;\n\t","\n\t","\n\t","\n\t","\n\t","\n\t","\n\t","\n\t","\n\t","\n\t","\n"]);return he=function(){return e},e}function be(){var e=Object(v.a)(["\n\t&&&& {\n\t\t","\n\t}\n\t&&& {\n\t\t","\n\t}\n"]);return be=function(){return e},e}function ve(){var e=Object(v.a)(["\n\t&&&& {\n\t\t","\n\t}\n\t&&& {\n\t\t&.compact {\n\t\t\tpadding: .5rem 1rem;\n\t\t}\n\t\t","\n\t\t","\n\t}\n"]);return ve=function(){return e},e}function ge(){var e=Object(v.a)(["\n\ttransform: ",";\n\t&&& {\n\t\t","\n\t}\n"]);return ge=function(){return e},e}function Ee(){var e=Object(v.a)(["\n\t&&&& {\n\t\t","\n\t}\n\t&&& {\n\t\t","\n\t}\n"]);return Ee=function(){return e},e}function Oe(){var e=Object(v.a)(["\n\t&&&& {\n\t\t","\n\t}\n\t&&& {\n\t\t","\n\t}\n"]);return Oe=function(){return e},e}function je(){var e=Object(v.a)(["\n\tcursor: pointer;\n\t","\n"]);return je=function(){return e},e}function ye(){var e=Object(v.a)(["\n\t","\n"]);return ye=function(){return e},e}function xe(){var e=Object(v.a)(["\n\t","\n"]);return xe=function(){return e},e}function ke(){var e=Object(v.a)(["\n\t","\n\t","\n"]);return ke=function(){return e},e}var we={widths:{formLabel:"122px",detailsPL:"55px",extraSidebar:"250px"},colors:{green:"#016936",blue:"#0E6EB8",error:"#9f3a38",errorBorder:"#e0b4b4"}},Ce=function(e){return we.colors[e]||e},Se=function(e){e.theme;var t=e.ai,n=e.bt,a=e.bb,r=e.bc,o=e.bs,c=e.c,i=e.d,l=e.fl,u=e.flw,s=e.fs,d=e.fw,m=e.h,p=e.jc,f=e.lh,h=e.mw,b=e.m,v=e.mb,g=e.mt,E=e.ml,O=e.o,j=e.ox,y=e.oy,x=e.p,k=e.pl,w=e.pr,C=e.pt,S=e.ta,I=e.va,D=e.w,P=e.ws;return"\n\t\t".concat(t?"align-items: ".concat(t,";"):"","\n\t\t").concat(n?"border-top: ".concat(n,";"):"","\n\t\t").concat(a?"border-bottom: ".concat(a,";"):"","\n\t\t").concat(r?"background-color: ".concat(r,";"):"","\n\t\t").concat(o?"box-sizing: ".concat(o,";"):"","\n\t\t").concat(c?"color: ".concat(c,";"):"","\n\t\t").concat(i?"display: ".concat(i,";"):"","\n\t\t").concat(l?"flex: ".concat(l,";"):"","\n\t\t").concat(u?"flex-wrap: ".concat(u,";"):"","\n\t\t").concat(s?"font-size: ".concat(s,";"):"","\n\t\t").concat(d?"font-weight: ".concat(d,";"):"","\n\t\t").concat(m?"height: ".concat(m,";"):"","\n\t\t").concat(p?"justify-content: ".concat(p,";"):"","\n\t\t").concat(f?"line-height: ".concat(f,";"):"","\n\t\t").concat(h?"max-width: ".concat(h,";"):"","\n\t\t").concat(b?"margin: ".concat(b,";"):"","\n\t\t").concat(v?"margin-bottom: ".concat(v,";"):"","\n\t\t").concat(g?"margin-top: ".concat(g,";"):"","\n\t\t").concat(E?"margin-left: ".concat(E,";"):"","\n\t\t").concat(O?"opacity: ".concat(O,";"):"","\n\t\t").concat(j?"overflow-x: ".concat(j,";"):"","\n\t\t").concat(y?"overflow-y: ".concat(y,";"):"","\n\t\t").concat(x?"padding: ".concat(x,";"):"","\n\t\t").concat(k?"padding-left: ".concat(k,";"):"","\n\t\t").concat(w?"padding-right: ".concat(w,";"):"","\n\t\t").concat(C?"padding-top: ".concat(C,";"):"","\n\t\t").concat(S?"text-align: ".concat(S,";"):"","\n\t\t").concat(I?"vertical-align: ".concat(I,";"):"","\n\t\t").concat(D?"width: ".concat(D,";"):"","\n\t\t").concat(P?"word-spacing: ".concat(P,";"):"","\n\t")},Ie=Object(D.a)(function(e){e.ml,e.w,e.inline;var t=Object(ie.a)(e,["ml","w","inline"]);return r.a.createElement("div",t)})(ke(),function(e){return e.inline&&"display: inline-block;"},function(e){return Se(e)}),De=(Object(D.a)(function(e){var t=Object(ce.a)({},e);return r.a.createElement("p",t)})(xe(),function(e){return Se(e)}),Object(D.a)(function(e){e.ml;var t=Object(ie.a)(e,["ml"]);return r.a.createElement("span",t)})(ye(),function(e){return Se(e)})),Pe=(D.a.a(je(),function(e){return e.cancel&&"{\n\t\tpadding-left: 15px;\n\t\tcolor: rgba(0,0,0,.87);\n\t\t&:hover {\n\t\t\tcolor: #B03060;\n\t\t}\n\t}"}),Object(D.a)(function(e){e.inline,e.c;var t=Object(ie.a)(e,["inline","c"]);return r.a.createElement(P.a,t)})(Oe(),function(e){return Se(e)},function(e){return e.inline&&"{\n\t\t\tmargin: 0;\n\t\t\tpadding: 0 1rem;\n\t\t}"})),Te=(Object(D.a)(function(e){e.activeColor;var t=Object(ie.a)(e,["activeColor"]);return r.a.createElement(ne.a,t)})(Ee(),function(e){return Se(e)},function(e){return e.activeColor&&"{\n\t\t\t&:hover {\n\t\t\t\tcolor: ".concat(Ce(e.activeColor)," !important;\n\t\t\t}\n\t\t\t&.active {\n\t\t\t\tcolor: ").concat(Ce(e.activeColor)," !important;\n\t\t\t}\n\t\t}")}),Object(D.a)(function(e){e.active,e.disabled;var t=Object(ie.a)(e,["active","disabled"]);return r.a.createElement(ne.a,Object.assign({},t,{name:"dropdown"}))})(ge(),function(e){return!e.active&&("large"===e.size?"translateX(0) translateY(0) rotate(-90deg) !important":"translateX(-3px) translateY(3px) rotate(-90deg) !important")},function(e){return e.disabled&&"{\n\t\t\tcolor: rgba(0,0,0,.6);\n\t\t}"})),qe=(Object(D.a)(function(e){e.activeColor,e.menu;var t=Object(ie.a)(e,["activeColor","menu"]);return r.a.createElement(A.a,t)})(ve(),function(e){return Se(e)},function(e){return e.activeColor&&"{\n\t\t\t&:hover {\n\t\t\t\tcolor: ".concat(Ce(e.activeColor)," !important;\n\t\t\t}\n\t\t\t&.active {\n\t\t\t\tcolor: ").concat(Ce(e.activeColor)," !important;\n        \t}\n\t\t}")},function(e){return e.menu&&"{\n\t\t\tmargin: .25rem 0 .25rem 0.5rem;\n\t\t\tz-index: 3;\n\t\t}"}),Object(D.a)(function(e){e.section;var t=Object(ie.a)(e,["section"]);return r.a.createElement(z.a,t)})(be(),function(e){return Se(e)},function(e){return e.section&&"\n\t\t\tmargin-top: 0;\n\t\t\tpadding-left: ".concat(e.theme.widths.detailsPL,";\n\t\t\tbox-shadow: 0 0 0 1px #e0b4b4, 0 0 0 0 transparent;\n\t\t\tborder-radius: 0;\n\t\t")}),Object(D.a)(function(e){e.head,e.minor,e.small,e.secondary,e.noP,e.noLP,e.noIndent,e.topBorder,e.bottomBorder;var t=e.children,n=e.onClick,a=Object(ie.a)(e,["head","minor","small","secondary","noP","noLP","noIndent","topBorder","bottomBorder","children","onClick"]);return r.a.createElement("div",Object.assign({},a,{onClick:n||void 0}),t)})(he(),function(e){return e.head&&"{\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tpadding-top: 0;\n\t\tpadding-bottom: 0;\n\t}"},function(e){return e.onClick&&"{\n\t\tcursor: pointer;\n\t}"},function(e){return e.minor&&"{\n\t\tmin-height: 3.5em;\n\t}"},function(e){return!e.size&&e.head&&"{\n\t\tmin-height: 3.5em;\n\t}"},function(e){return"small"===e.size&&"{\n\t\tmin-height: 2.5em;\n\t}"},function(e){return e.secondary&&"{\n\t\tbackground: #f3f4f5;\n\t\tcolor: rgba(0,0,0,.6);\n\t}"},function(e){return e.noLP&&"{\n\t\tpadding-left: 0;\n\t}"},function(e){return e.noIndent&&"{\n\t\tpadding-left: 1em;\n\t}"},function(e){return e.topBorder&&"{\n\t\tborder-top: 1px solid ".concat("dark"===e.topBorder?"rgba(152, 153, 154, 1)":"rgba(34,36,38,.15)",";\n\t}")},function(e){return e.bottomBorder&&"{\n\t\tborder-bottom: 1px solid ".concat("dark"===e.bottomBorder?"rgba(126, 127, 129, 1)":"rgba(34,36,38,.1)",";\n\t}")}));Object(D.a)(function(e){e.showIf;var t=Object(ie.a)(e,["showIf"]);return r.a.createElement(le.a,t)})(fe(),function(e){return!e.showIf&&"{\n\t\t\topacity: 0;\n\t\t}"}),D.a.label(pe(),function(e){return Se(e)},function(e){return e.theme.widths.formLabel}),Object(D.a)(function(e){e.w;var t=Object(ie.a)(e,["w"]);return r.a.createElement(ue.a,t)})(me(),function(e){return Se(e)}),Object(D.a)(ae.a)(de(),function(e){return Se(e)}),Object(D.a)(function(e){e.w;var t=Object(ie.a)(e,["w"]);return r.a.createElement(q.a.Field,t)})(se(),function(e){return Se(e)});function ze(){var e=Object(v.a)(["\n  margin: 0 5px 1em 5px;\n  flex: 1 0 150px;\n"]);return ze=function(){return e},e}function Ae(){var e=Object(v.a)(["\n  query allDeptsAndModelsQuery {\n    depts {\n      id\n      name\n    }\n    models {\n      id\n      name\n    }\n  }\n"]);return Ae=function(){return e},e}var Be=E()(Ae()),Me=D.a.div(ze()),Ne=function(e){function t(e){var n;if(Object(i.a)(this,t),(n=Object(u.a)(this,Object(s.a)(t).call(this,e))).open=function(){return n.setState({open:!0})},n.close=function(){return n.setState({open:!1})},n.handleSelChange=function(e,t){var a,r=t.name,o=t.value,c=t.required,i=!(""!==o||!c);n.setState((a={},Object(I.a)(a,r,o),Object(I.a)(a,"".concat(r,"Err"),i),a)),console.log("Selected: ".concat(o))},n.handleIntChange=function(e,t){var a,r=t.name,o=t.value,c=t.min,i=t.max,l=t.required,u=parseInt(o,10)||(0===parseInt(o,10)?0:""),s=!(""===u&&!l)&&(u<c||i<u);n.setState((a={},Object(I.a)(a,r,u),Object(I.a)(a,"".concat(r,"Err"),s),a))},n.changeStatus=function(e,t){var a=t.name;e.preventDefault(),e.stopPropagation();var r=n.state[a];n.setState({hasDefect:!1,isSpoiled:!1}),r||n.setState(Object(I.a)({},a,!0))},n.confirm=Object(S.a)(C.a.mark(function e(){var t,a,r,o,c,i,l,u,s,d,m,p,f,h,b;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.props.mode,a="create"===t?["deptId","modelId","melt","number","year"]:["melt","number","year"],r=!1,n.setState(Object.assign.apply(Object,Object(W.a)(a.map(function(e){return""===n.state[e]&&(r=!0,Object(I.a)({},"".concat(e,"Err"),!0))})))),a.forEach(function(e){n.state["".concat(e,"Err")]&&(r=!0)}),!r){e.next=7;break}return e.abrupt("return",null);case 7:return o=n.state,c=o.id,i=o.deptId,l=o.modelId,u=o.melt,s=o.number,d=o.year,m=n.state.meltShift||null,p=n.state.progress||null,f=n.state.hasDefect||null,h=n.state.isSpoiled||null,b={deptId:i,modelId:l,melt:u,meltShift:m,number:s,year:d,progress:p,hasDefect:f,isSpoiled:h},"edit"===t&&(b.id=c),e.prev=14,e.next=17,n.props.upsertProd({variables:{input:Object(re.a)({},b)}});case 17:n.setState({err:null}),n.close(),e.next=25;break;case 21:e.prev=21,e.t0=e.catch(14),console.log("err > ",e.t0),n.setState({err:e.t0});case 25:case"end":return e.stop()}},e,this,[[14,21]])})),n.state={open:!1,deptId:"",modelId:"",melt:"",meltShift:"",number:"",year:"",progress:"",hasDefect:!1,isSpoiled:!1,deptIdErr:!1,modelIdErr:!1,meltErr:!1,meltShiftErr:!1,numberErr:!1,yearErr:!1,progressErr:!1,err:null},"edit"===e.mode)for(var a in n.state=Object(re.a)({},n.state,e.prod),n.state)null===n.state[a]&&(n.state[a]="");return n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.state,n=t.open,a=t.deptId,o=t.modelId,c=t.melt,i=t.meltShift,l=t.number,u=t.year,s=t.progress,d=t.hasDefect,m=t.isSpoiled,p=t.deptIdErr,f=t.modelIdErr,h=t.meltErr,b=t.meltShiftErr,v=t.numberErr,g=t.yearErr,E=t.progressErr,O=t.err,j=this.props,y=j.trigger,x=j.mode,k=[{text:"\u0423\u0447\u0430\u0441\u0442\u043e\u043a ",value:""}],w=[{text:"\u0412\u0438\u0434 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438",value:""}];if("create"===x){var C=this.props.allDeptsAndModelsQuery;k=C?C.loading?[{text:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0441\u043f\u0438\u0441\u043a\u0430",value:""}]:C.error?[{text:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0441\u043f\u0438\u0441\u043a\u0430",value:""}]:C.depts.map(function(e){return{text:e.name,value:e.id}}).sort(function(e,t){return e.text>t.text?1:-1}):[{text:"\u0423\u0447\u0430\u0441\u0442\u043e\u043a ",value:""}],w=C?C.loading?[{text:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0441\u043f\u0438\u0441\u043a\u0430",value:""}]:C.error?[{text:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0441\u043f\u0438\u0441\u043a\u0430",value:""}]:C.models.map(function(e){return{text:e.name,value:e.id}}):[{text:"\u0412\u0438\u0434 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438",value:""}]}return r.a.createElement(oe.a,{trigger:y,open:n,onOpen:this.open,onClose:this.close},r.a.createElement(oe.a.Header,{as:"h2"},"create"===x?"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c":"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"," \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u044e "),r.a.createElement(oe.a.Content,null,r.a.createElement(q.a,{onSubmit:function(){return e.confirm()},error:!(!O||!O.message)},"create"===x&&r.a.createElement(q.a.Select,{label:"\u0423\u0447\u0430\u0441\u0442\u043e\u043a",name:"deptId",options:k,onChange:this.handleSelChange,value:a,error:p,required:!0,search:!0,noResultsMessage:"\u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e.."}),"create"===x&&r.a.createElement(q.a.Select,{label:"\u0412\u0438\u0434 \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u0438",name:"modelId",options:w,onChange:this.handleSelChange,value:o,error:f,required:!0,search:!0,noResultsMessage:"\u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e.."}),r.a.createElement(Ie,{d:"flex",jc:"stretch",ai:"flex-end",flw:"wrap",m:"0 -5px"},r.a.createElement(Me,null,r.a.createElement(q.a.Input,{label:"\u041f\u043b\u0430\u0432\u043a\u0430",placeholder:"\u041f\u043b\u0430\u0432\u043a\u0430",required:!0,name:"melt",type:"number",min:"0",max:"999",error:h,onChange:this.handleIntChange,value:c})),r.a.createElement(Me,null,r.a.createElement(q.a.Input,{label:"\u041f\u043b\u0430\u0432. \u0441\u043c\u0435\u043d\u0430 (\u0435\u0441\u043b\u0438 \u043f\u0440\u043e\u043c\u0430\u0440\u043a\u0438\u0440\u043e\u0432\u0430\u043d\u0430)",placeholder:"\u041f\u043b. \u0441\u043c\u0435\u043d\u0430",name:"meltShift",type:"number",min:"0",max:"3",error:b,onChange:this.handleIntChange,value:i})),r.a.createElement(Me,null,r.a.createElement(q.a.Input,{label:"\u041d\u043e\u043c\u0435\u0440",placeholder:"\u041d\u043e\u043c\u0435\u0440",required:!0,name:"number",type:"number",min:"1",max:"999",error:v,onChange:this.handleIntChange,value:l})),r.a.createElement(Me,null,r.a.createElement(q.a.Input,{label:"\u0413\u043e\u0434",placeholder:"\u0413\u043e\u0434",required:!0,name:"year",type:"number",min:"16",max:(new Date).getFullYear().toString().slice(2,4),error:g,onChange:this.handleIntChange,value:u}))),r.a.createElement(q.a.Input,{label:"\u041f\u0440\u043e\u0446\u0435\u043d\u0442 \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u0438\u044f",placeholder:"%",name:"progress",type:"number",min:"0",max:"100",error:E,onChange:this.handleIntChange,value:s}),r.a.createElement(q.a.Field,null,r.a.createElement("label",null,"\u041d\u0430\u043b\u0438\u0447\u0438\u0435 \u0434\u0435\u0444\u0435\u043a\u0442\u043e\u0432"),r.a.createElement(A.a.Group,null,r.a.createElement(A.a,{name:"hasDefect",active:d||null,color:d?"orange":null,onClick:this.changeStatus},"\u041e\u0442\u043a\u043b\u043e\u043d\u0435\u043d\u0438\u0435"),r.a.createElement(A.a,{name:"isSpoiled",active:m||null,color:m?"red":null,onClick:this.changeStatus},"\u0411\u0440\u0430\u043a"))),r.a.createElement(z.a,{error:!0,header:"".concat("create"===x?"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c":"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"," \u043d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c.."),content:O&&O.message}))),r.a.createElement(oe.a.Actions,null,r.a.createElement(A.a,{onClick:this.close,color:"red"},r.a.createElement(ne.a,{name:"remove"})," \u041e\u0442\u043c\u0435\u043d\u0430"),r.a.createElement(A.a,{onClick:this.confirm},r.a.createElement(ne.a,{name:"checkmark"})," ","create"===x?"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c":"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c")))}}]),t}(a.Component),Re=Object(b.compose)(Object(b.graphql)(Be,{name:"allDeptsAndModelsQuery"}),Object(b.graphql)(Z,{name:"upsertProd",options:{update:function(e,t){var n=t.data.upsertProd,a="Dept:".concat(n.dept.id),r=X,o=e.readFragment({id:a,fragment:r});delete n.dept,o.prods||(o.prods=[]),o.prods=Object(W.a)(o.prods.filter(function(e){return e.id!==n.id})).concat([n]),e.writeFragment({id:a,fragment:r,data:o})}}}))(Ne);function Le(){var e=Object(v.a)(["\n  query AllDeptsAndModelsQuery {\n    depts {\n      id\n      name\n    }\n  }\n"]);return Le=function(){return e},e}var $e=E()(Le()),Fe=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).state={open:!1,deptId:""},n.open=function(){return n.setState({open:!0})},n.close=function(){return n.setState({open:!1})},n.handleChange=function(e,t){t&&(n.setState({deptId:t.value}),console.log("Selected: ".concat(t.value)))},n.confirm=function(){var e=n.state.deptId;n.props.moveProds(e),n.close()},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.state,t=e.open,n=e.deptId,a=this.props.trigger,o=this.props.AllDeptsAndModelsQuery,c=o?o.loading?[{text:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0441\u043f\u0438\u0441\u043a\u0430",value:""}]:o.error?[{text:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0441\u043f\u0438\u0441\u043a\u0430",value:""}]:o.depts.map(function(e){return{text:e.name,value:e.id}}):[{text:"\u0423\u0447\u0430\u0441\u0442\u043e\u043a ",value:""}];return r.a.createElement(oe.a,{trigger:a,open:t,onOpen:this.open,onClose:this.close},r.a.createElement(oe.a.Header,{as:"h2"}," \u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u044e "),r.a.createElement(oe.a.Content,null,r.a.createElement(q.a,{onSubmit:this.confirm},r.a.createElement(q.a.Select,{label:"\u041a\u0443\u0434\u0430",options:c,onChange:this.handleChange,value:n,required:!0}))),r.a.createElement(oe.a.Actions,null,r.a.createElement(A.a,{onClick:this.close,color:"red"},r.a.createElement(ne.a,{name:"remove"})," \u041e\u0442\u043c\u0435\u043d\u0430"),r.a.createElement(A.a,{onClick:this.confirm},r.a.createElement(ne.a,{name:"arrow right"})," \u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c")))}}]),t}(a.Component),Qe=Object(b.graphql)($e,{name:"AllDeptsAndModelsQuery"})(Fe),We=[{type:"OWNED",title:"\u041d\u0430\u0448\u0438"},{type:"TRANSPORT",title:"\u0422\u0440\u0430\u043d\u0441\u043f\u043e\u0440\u0442"},{type:"PARTNER",title:"\u041f\u043e\u0434\u0440\u044f\u0434\u0447\u0438\u043a\u0438"},{type:"CLIENT",title:"\u041a\u043b\u0438\u0435\u043d\u0442\u044b"}],He=function(e){var t=e.refreshToken,n=e.visibleDeptTypes,a=e.filterDeptType,o=e.moveProds;return r.a.createElement(te.a,{size:"huge",inverted:!0},r.a.createElement(te.a.Item,{header:!0},"KOMZ"),r.a.createElement(te.a.Menu,null,r.a.createElement(Re,{mode:"create",id:"",trigger:r.a.createElement(te.a.Item,{icon:!0,link:!0,name:"create",color:"grey"},r.a.createElement(ne.a,{name:"plus"}))}),r.a.createElement(Qe,{moveProds:o,trigger:r.a.createElement(te.a.Item,{icon:!0,link:!0,name:"move",color:"grey"},r.a.createElement(ne.a,{name:"arrow right"}))})),r.a.createElement(te.a.Menu,{position:"right"},r.a.createElement(ae.a,{item:!0,icon:"setting",simple:!0,className:"komz-navBarSettingsItem"},r.a.createElement(ae.a.Menu,null,r.a.createElement(ae.a.Header,null,"\u0423\u0447\u0430\u0441\u0442\u043a\u0438"),We.map(function(e){var t=e.type,o=e.title,c=Y.a.includes(n,t);return r.a.createElement(ae.a.Item,{key:t,type:t,active:Y.a.includes(n,t),onClick:function(e,t){return a(t.type)}},r.a.createElement(ne.a,{name:c?"checkmark box":"square outline"}),o)}))),r.a.createElement(te.a.Item,{icon:!0,onClick:function(){return t(null)}},r.a.createElement(ne.a,{name:"sign out"}))))},Ye=n(482),Ge=n(237),Je=n(481),Ue=n(476),Xe=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).state={checked:!1},n.handleClick=function(e,t){var a=n.state.checked,r=n.props.prod.id;n.setState({checked:!a}),n.props.selectProd(r)},n.preventPropagation=function(e,t){e.stopPropagation()},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.state.checked,t=this.props.prod,n=t.melt,a=t.meltShift,o=t.number,c=t.year,i=t.progress,l=t.isSpoiled,u=t.hasDefect,s=t.order;return r.a.createElement(Je.a.Item,{onClick:this.handleClick,active:e},r.a.createElement(Je.a.Content,null,r.a.createElement(Je.a.Content,{floated:"right"},r.a.createElement(Re,{mode:"edit",prod:this.props.prod,trigger:r.a.createElement(A.a,{size:"mini",content:"\u0420\u0435\u0434\u0430\u043a\u0442",icon:"edit",labelPosition:"right",onClick:this.preventPropagation})})),r.a.createElement(Je.a.Content,null,r.a.createElement(Je.a.Icon,{name:e?"checkmark box":"square outline"}),n,a>0&&"."+a,"-",o,"-",c,i&&r.a.createElement(Ge.a,{size:"small"},i||"_","%"),u&&r.a.createElement(Ge.a,{color:"orange",tag:!0,size:"small"},"\u041e\u0422\u041a\u041b\u041e\u041d\u0415\u041d\u0418\u0415"),l&&r.a.createElement(Ge.a,{color:"red",tag:!0,size:"small"},"\u0411\u0420\u0410\u041a"),!!s&&r.a.createElement(Ge.a,{color:"brown",tag:!0,size:"small"},"\u0417\u0410\u041a\u0410\u0417 \u2116 "+s.fullnum))),i&&r.a.createElement(Ue.a,{percent:i,indicating:!0,autoSuccess:!0,attached:"bottom"}))}}]),t}(a.Component),_e=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props.prods;return r.a.createElement(Je.a,{divided:!0,selection:!0,size:"medium"},t.map(function(t){return r.a.createElement(Xe,{prod:t,key:t.id,selectProd:e.props.selectProd})}))}}]),t}(a.Component);function Ke(){var e=Object(v.a)(["\n  &&&& {\n    padding-top: 0;\n  }\n"]);return Ke=function(){return e},e}function Ze(){var e=Object(v.a)(["\n  &&&& {\n    margin-top: 0;\n    padding-top: 0;\n    ","\n  }\n"]);return Ze=function(){return e},e}var Ve=Object(D.a)(Ye.a.Title)(Ze(),function(e){return e.active&&"{\n      padding-bottom: 0;\n    }"}),et=Object(D.a)(Ye.a.Content)(Ke()),tt=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).state={activeIndex:[]},n.handleClick=function(e,t){var a=t.index,r=n.state.activeIndex,o=Y.a.includes(r,a)?Y.a.without(r,a):Object(W.a)(r).concat([a]);n.setState({activeIndex:o})},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.state.activeIndex,n=this.props.deptModels.map(function(n,a){var o=n.prods,c=o.length,i=o.filter(function(e){return 100===e.progress}).length,l=o.filter(function(e){return e.hasDefect}).length,u=o.filter(function(e){return e.isSpoiled}).length,s=c-i-u,d=o.filter(function(e){return!!e.order}).length,m=n.id,p=Y.a.includes(t,m);return r.a.createElement("div",{key:m+"_deptModel"},r.a.createElement(Ve,{active:p,index:m,onClick:e.handleClick},r.a.createElement(ne.a,{name:"dropdown"}),r.a.createElement(P.a,{size:"small",as:"span"},n.model.name,r.a.createElement(Ge.a,{color:"grey"},c,r.a.createElement(Ge.a.Detail,null,"\u0448\u0442"))),r.a.createElement(Ge.a.Group,{className:"komz-ml-21px"},i>0&&r.a.createElement(Ge.a,{basic:!0},r.a.createElement(ne.a,{name:"checkmark",color:"green"}),i,r.a.createElement(Ge.a.Detail,null,"\u0413\u041f")),s>0&&r.a.createElement(Ge.a,{basic:!0},s,r.a.createElement(Ge.a.Detail,null,"\u041d\u0417\u041f")),l>0&&r.a.createElement(Ge.a,{basic:!0},r.a.createElement(ne.a,{name:"warning sign",color:"orange"}),l,r.a.createElement(Ge.a.Detail,null,"\u041e\u0422\u041a\u041b\u041e\u041d")),u>0&&r.a.createElement(Ge.a,{basic:!0},r.a.createElement(ne.a,{name:"broken chain",color:"red"}),u,r.a.createElement(Ge.a.Detail,null,"\u0411\u0420\u0410\u041a")),d>0&&r.a.createElement(Ge.a,{basic:!0},r.a.createElement(ne.a,{name:"gavel",color:"brown"}),d,r.a.createElement(Ge.a.Detail,null,"\u0420\u0415\u0417\u0415\u0420\u0412")))),p&&r.a.createElement(et,{active:!0},r.a.createElement(_e,{prods:n.prods,selectProd:e.props.selectProd})))});return r.a.createElement(Ye.a,null,n)}}]),t}(a.Component);function nt(){var e=Object(v.a)(["\n\t&&& {\n\t\tbox-sizing: content-box;\n\t\twidth: calc(35px - 1em);\n\t\tmargin: 0 0.5em;\n\t}\n"]);return nt=function(){return e},e}function at(){var e=Object(v.a)(["\n\t&&& {\n\t\tbox-sizing: content-box;\n\t\twidth: calc(35px - 1em);\n\t\tmargin: 0 0.5em;\n\t}\n"]);return at=function(){return e},e}var rt=Object(D.a)(ne.a)(at()),ot=Object(D.a)(Te)(nt()),ct=function(e){var t=e.closeDetails,n=e.expanded,a=e.onClick,o=e.children,c=t?"main":"expandable";return r.a.createElement(qe,{head:!0,noIndent:!0,bottomBorder:!0,minor:!0,onClick:a},"main"===c?r.a.createElement(rt,{link:!0,size:"big",name:"cancel",onClick:t}):r.a.createElement(ot,{size:"large",active:n?1:0}),o)},it=function(e){var t=e.text;return r.a.createElement(De,{ml:"10px",fs:"1rem",c:"rgba(0,0,0,.6)",ws:"0.5em"},t)},lt=function(e){var t=e.title,n=e.subtitle,a=e.titleSize;return r.a.createElement(Pe,{m:"0",size:a||"medium"},t,n&&r.a.createElement(it,{text:n}))},ut=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.expanded,n=e.title,a=e.subtitle,o=e.titleSize,c=e.onClick;return r.a.createElement(ct,{expanded:t,onClick:c},r.a.createElement(lt,{title:n,subtitle:a,titleSize:o}))}}]),t}(a.Component);function st(){var e=Object(v.a)(["\n  &&&& { \n    padding-top: 0;\n  }\n"]);return st=function(){return e},e}function dt(){var e=Object(v.a)(["\n  &&&& { \n    padding: 0;\n    ","\n  }\n"]);return dt=function(){return e},e}var mt=Object(D.a)(qe)(dt(),function(e){return e.expanded&&"{\n      margin-top: -1px;\n      border-bottom-color: rgba(34, 36, 38, 0.15);\n    }"}),pt=Object(D.a)(qe)(st()),ft=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).state={expanded:!1},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.state.expanded,n=this.props,a=n.title,o=n.subtitle,c=n.children,i=n.size;return r.a.createElement(mt,{expanded:t?1:0,topBorder:t,bottomBorder:t},r.a.createElement(ut,{expanded:t,title:a,subtitle:o,titleSize:i||"small",onClick:function(){return e.setState({expanded:!t})}}),t&&r.a.createElement(pt,null,c))}}]),t}(a.Component);function ht(){var e=Object(v.a)(["\n  &&&& {\n    padding: 0;\n  }\n"]);return ht=function(){return e},e}var bt=Object(D.a)(T.a)(ht()),vt=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props.depts,n=Y.a.cloneDeep(t).map(function(e){return Object(re.a)({},e,{prodsCount:e.prods.length,deptModels:Y()(e.prods).sortBy("model.name").groupBy("model.id").reduce(function(e,t){return e.push({id:t[0].model.id,model:Object(re.a)({},t[0].model),prods:Y.a.sortBy(t.map(function(e){return delete e.model,e}),function(e){return-(e.progress||!e.progress)})}),e},[]),prods:"cleared"})});return r.a.createElement(Ye.a,{fluid:!0},n.map(function(t,n){return r.a.createElement(bt,{key:t.id,color:"TRANSPORT"===t.type?"green":"PARTNER"===t.type?"blue":"CLIENT"===t.type?"purple":"black"},r.a.createElement(ft,{size:"large",title:t.name,subtitle:"(".concat(t.prodsCount,")")},r.a.createElement(tt,{deptModels:t.deptModels,selectProd:e.props.selectProd})))}))}}]),t}(a.Component),gt=function(e){return r.a.createElement(z.a,{warning:!0},r.a.createElement("p",null,r.a.createElement(ne.a,{name:"warning"}),r.a.createElement("b",null,"\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0434\u0430\u043d\u043d\u044b\u0445 ",e.dataTitle)),r.a.createElement("p",null,r.a.createElement("u",null,"\u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u0435:")),r.a.createElement("p",null,"1. \u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443"),r.a.createElement("p",null,"2. \u0417\u0430\u043d\u043e\u0432\u043e \u0432\u043e\u0439\u0442\u0438 \u0432 \u0441\u0438\u0441\u0442\u0435\u043c\u0443"),r.a.createElement("p",null,"3. \u0415\u0441\u043b\u0438 \u043e\u0448\u0438\u0431\u043a\u0430 \u0441\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u0441\u044f, \u0441\u043e\u043e\u0431\u0449\u0438\u0442\u0435 \u0410\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440\u0443"),r.a.createElement("p",null,"4. \u0412\u043e\u0437\u043c\u043e\u0436\u043d\u043e, \u043d\u0430\u0440\u0443\u0448\u0435\u043d\u044b \u043f\u0440\u0430\u0432\u0430 \u0434\u043e\u0441\u0442\u0443\u043f\u0430"))},Et=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).state={selectedProds:[],visibleDeptTypes:["OWNED","TRANSPORT"]},n.selectProd=function(e){var t=n.state.selectedProds,a=Y.a.includes(t,e)?Y.a.without(t,e):Object(W.a)(t).concat([e]);n.setState({selectedProds:a})},n.filterDeptType=function(e){console.log("type > ",e);var t=n.state.visibleDeptTypes,a=Y.a.includes(t,e)?Y.a.without(t,e):Object(W.a)(t).concat([e]);n.setState({visibleDeptTypes:a})},n.moveProds=function(){var e=Object(S.a)(C.a.mark(function e(t){var a;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.state.selectedProds,e.prev=1,e.next=4,n.props.moveProds({variables:{to:t,prodIds:a}});case 4:a.forEach(function(e){return n.selectProd(e)}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.log(e.t0);case 10:case"end":return e.stop()}},e,this,[[1,7]])}));return function(t){return e.apply(this,arguments)}}(),n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.state.visibleDeptTypes,t=this.props,n=t.refreshToken,a=t.allDepts,o=a.loading,c=a.error,i=a.depts;return r.a.createElement(ee.a,{text:!0},r.a.createElement(He,{refreshToken:n,visibleDeptTypes:e,filterDeptType:this.filterDeptType,moveProds:this.moveProds}),o?r.a.createElement("div",null,"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430"):c?r.a.createElement(gt,{dataTitle:"DeptList"}):i&&r.a.createElement(vt,{depts:i.filter(function(t){return!!Y.a.includes(e,t.type)}),selectProd:this.selectProd}))}}]),t}(a.Component),Ot=Object(b.compose)(Object(b.graphql)(U,{name:"allDepts"}),Object(b.graphql)(V,{name:"moveProds",options:{update:function(e,t){var n=t.data.moveProds,a=n.prods,r=n.to,o=U,c=e.readQuery({query:o}),i=Y()(a).groupBy("dept.id").reduce(function(e,t,n){var a=c.depts.find(function(e){return e.id===n}),r=Y.a.intersectionBy(a.prods,t,"id");return a.prods=Y.a.differenceBy(a.prods,t,"id"),Object(W.a)(e).concat(Object(W.a)(r))},[]);console.log("allMovedProds > ",i);var l=c.depts.find(function(e){return e.id===r});l.prods=Object(W.a)(l.prods).concat(Object(W.a)(i)),e.writeQuery({query:o,data:c})}}}))(Et),jt=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).state={token:n.props.token},n.bootStrapData=function(){try{var e=localStorage.getItem(m);if(null!==e&&void 0!==e)h(e)?n.refreshToken(null):n.setState({token:e})}catch(t){console.log("")}},n.refreshToken=function(e){e?localStorage.setItem(m,e):(localStorage.removeItem(m),n.props.client.resetStore()),n.setState({token:e})},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.bootStrapData()}},{key:"render",value:function(){var e=this,t=this.state.token;return r.a.createElement(a.Fragment,null,t?r.a.createElement(b.Query,{query:x},function(t){var n=t.loading,a=t.error,o=t.data;return n?null:a?"Error!: ".concat(a.message):r.a.createElement(Ot,{me:o.me,refreshToken:e.refreshToken})}):r.a.createElement(Q,{refreshToken:this.refreshToken}))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var yt=new(n(273).a)({uri:"https://env-1542080.mircloud.ru",request:function(e){var t=localStorage.getItem(m);e.setContext({headers:{Authorization:t?"Bearer ".concat(t):""}})}}),xt=localStorage.getItem(m);c.a.render(r.a.createElement(b.ApolloProvider,{client:yt},r.a.createElement(jt,{token:xt,client:yt})),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[283,2,1]]]);
//# sourceMappingURL=main.5ba00efb.chunk.js.map