{"version":3,"sources":["constants.js","utils/jwtHelper.js","graphql/user.js","components/shared/LoginPage.js","graphql/dept.js","graphql/prod.js","components/shared/styled-semantic.js","components/CRUProdModal.js","components/MoveModal.js","components/NavBar.js","components/ProdItem.js","components/ProdList.js","components/ModelList.js","components/shared/DetailsHeaderContainer.js","components/shared/DetailsHeaderSubitle.js","components/shared/DetailsHeaderTitle.js","components/shared/DetailsHeader.js","components/shared/CollapsableSection.js","components/DeptList.js","components/common/DataLoadErrorMessage.js","components/Store.js","App.js","serviceWorker.js","index.js"],"names":["AUTH_TOKEN","isTokenExpired","token","date","decoded","decode","exp","Date","setUTCSeconds","getTokenExpirationDate","console","log","valueOf","offsetSeconds","me","gql","_templateObject","login","_templateObject2","_templateObject3","MenuDiv","styled","div","LoginPage_templateObject","MenuHeader","Header","LoginPage_templateObject2","SSegment","Segment","LoginPage_templateObject3","LoginPage","state","email","password","sendingRequest","error","handleInputChange","attr","_this","setState","Object","defineProperty","value","submit","_callee","_this$state","result","regenerator_default","a","wrap","_context","prev","next","props","variables","sent","data","refreshToken","t0","message","stop","this","_this2","_this$state2","react_default","createElement","react","size","basic","Form","Field","type","placeholder","ref","onChange","Message","header","content","Button","primary","floated","disabled","loading","onClick","Component","compose","graphql","name","options","fetchPolicy","allDepts","dept_templateObject","deptFragment","dept_templateObject2","upsertProd","prod_templateObject","moveProds","prod_templateObject2","theme","widths","formLabel","detailsPL","extraSidebar","colors","green","blue","errorBorder","getThemeColor","color","baseSet","_ref","ai","bt","bb","bc","bs","c","d","fl","flw","fs","fw","h","jc","lh","mw","m","mb","mt","ml","o","ox","oy","p","pl","pr","pt","ta","va","w","ws","concat","Div","_ref2","inline","rest","objectWithoutProperties","styled_semantic_templateObject","Span","_ref3","esm_extends","styled_semantic_templateObject2","_ref4","styled_semantic_templateObject3","_templateObject4","cancel","_ref5","_templateObject5","Caret","_ref6","activeColor","Icon","_templateObject6","_ref7","active","assign","_templateObject7","Section","_ref8","menu","_templateObject8","_ref9","section","_templateObject9","_ref10","head","minor","small","secondary","noP","noLP","noIndent","topBorder","bottomBorder","children","undefined","_templateObject10","_ref11","showIf","Popup","_templateObject11","label","_templateObject12","_ref12","Input","_templateObject13","SDropdown","_templateObject14","_ref13","_templateObject15","allDeptsAndModelsQuery","CRUProdModal_templateObject","EqualField","CRUProdModal_templateObject2","CRUProdModal","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","open","close","handleSelChange","event","_this$setState","required","warn","handleIntChange","_this$setState2","min","max","intValue","parseInt","changeStatus","e","preventDefault","stopPropagation","curVal","hasDefect","isSpoiled","confirm","asyncToGenerator","mark","mode","requiredFields","shouldExit","id","deptId","modelId","melt","number","year","meltShift","progress","input","apply","toConsumableArray","map","field","forEach","abrupt","objectSpread","err","deptIdErr","modelIdErr","meltErr","meltShiftErr","numberErr","yearErr","progressErr","k","prod","_this$props","trigger","deptOptions","text","modelOptions","query","depts","dept","sort","b","models","model","Modal","onOpen","onClose","as","Content","onSubmit","Select","search","noResultsMessage","getFullYear","toString","slice","Group","Actions","update","cache","newProd","fragment","readFragment","prods","filter","writeFragment","AllDeptsAndModelsQuery","MoveModal_templateObject","MoveModal","handleChange","allTypes","title","NavBar","visibleDeptTypes","filterDeptType","Menu","inverted","Item","components_CRUProdModal","icon","link","components_MoveModal","position","Dropdown","item","simple","className","_","includes","key","t","ProdItem","checked","handleClick","selectProd","preventPropagation","eb","_this$props$prod","order","List","labelPosition","Label_Label","tag","fullnum","Progress","percent","indicating","autoSuccess","attached","ProdList","divided","selection","components_ProdItem","AccordionTitle","Accordion","Title","ModelList_templateObject","AccordionContent","ModelList_templateObject2","ModelList","activeIndex","titleProps","index","newIndex","without","deptModels","deptModel","i","allProdsCount","length","prodsReadyCount","prodsDefectCount","prodsSpoiledCount","prodsInProgressCount","prodsOrderedCount","Detail","components_ProdList","SIcon","DetailsHeaderContainer_templateObject","SCaret","DetailsHeaderContainer_templateObject2","DetailsHeaderContainer","closeDetails","expanded","headerType","DetailsHeaderSubitle","DetailsHeaderTitle","subtitle","titleSize","styled_semantic_Header","shared_DetailsHeaderSubitle","DetailsHeader","shared_DetailsHeaderContainer","shared_DetailsHeaderTitle","OuterSection","CollapsableSection_templateObject","SSection","CollapsableSection_templateObject2","CollapsableSection","shared_DetailsHeader","DeptList_templateObject","DeptList","propDepts","cloneDeep","prodsCount","sortBy","groupBy","reduce","dMs","push","fluid","DeptList_SSegment","shared_CollapsableSection","components_ModelList","DataLoadErrorMessage","warning","dataTitle","Store","selectedProds","prodId","newList","to","prodIds","_this$props$allDepts","Container","components_NavBar","common_DataLoadErrorMessage","components_DeptList","_reponseData$moveProd","readQuery","allMovedProds","find","deptMovedProds","intersectionBy","differenceBy","writeQuery","Root","bootStrapData","localStorage","getItem","setItem","removeItem","client","resetStore","react_apollo_browser_umd","components_Store","shared_LoginPage","Boolean","window","location","hostname","match","ApolloClient","uri","request","operation","setContext","headers","Authorization","ReactDOM","render","App","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.5ba00efb.chunk.js","sourcesContent":["export const AUTH_TOKEN = 'kolmech-token'","import decode from 'jwt-decode'\r\n\r\nexport function getTokenExpirationDate(token) {\r\n  const decoded = decode(token)\r\n  if (!decoded.exp) {\r\n    return null\r\n  }\r\n  const date = new Date(0) // The 0 here is the key, which sets the date to the epoch\r\n  date.setUTCSeconds(decoded.exp)\r\n  return date\r\n}\r\n\r\nexport function isTokenExpired(token) {\r\n  const date = getTokenExpirationDate(token)\r\n  const offsetSeconds = 0\r\n  if (date === null) {\r\n    return false\r\n  }\r\n  console.log(date, new Date().valueOf() + offsetSeconds * 1000)\r\n  return !(date.valueOf() > new Date().valueOf() + offsetSeconds * 1000)\r\n}\r\n","import gql from 'graphql-tag'\r\n\r\nexport const me = gql`\r\n\tquery Me {\r\n\t\tme {\r\n\t\t\tid\r\n\t\t\temail\r\n\t\t\tperson {\r\n\t\t\t\tfName\r\n\t\t\t\tlName\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n`\r\n\r\nexport const meLocal = gql`\r\n\tquery MeLocal {\r\n\t\tme @client {\r\n\t\t\tperson {\r\n\t\t\t\tfName\r\n\t\t\t\tlName\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n`\r\n\r\nexport const login = gql`\r\n\tmutation Login($email: String!, $password: String!) {\r\n\t\tlogin(email: $email, password: $password) {\r\n\t\t\ttoken\r\n\t\t}\r\n\t}\r\n`","import React, { Component, Fragment } from 'react'\r\n\r\nimport styled from 'styled-components'\r\nimport { Header, Form, Message, Button, Segment } from 'semantic-ui-react'\r\n\r\nimport { graphql, compose } from 'react-apollo'\r\nimport { login } from '../../graphql/user'\r\n\r\nconst MenuDiv = styled.div`\r\n\tborder-bottom: 1px solid #7e7e81;\r\n\t// height: 35px;\r\n`\r\n\r\nconst MenuHeader = styled(Header)`\r\n\tdisplay: inline;\r\n\tpadding: 0 1rem !important;\r\n`\r\n\r\nconst SSegment = styled(Segment)`\r\n\tmax-width: 350px !important;\r\n\tmargin: auto !important;\r\n`\r\n\r\nclass LoginPage extends Component {\r\n\tstate = {\r\n\t\temail: '',\r\n\t\tpassword: '',\r\n\t\tsendingRequest: false,\r\n\t\terror: ''\r\n\t}\r\n\thandleInputChange = (attr) => {\r\n\t\tthis.setState({ [attr]: this[attr].value })\r\n\t}\r\n\tsubmit = async () => {\r\n\t\ttry {\r\n\t\t\tconst { email, password } = this.state\r\n\t\t\tthis.setState({ sendingRequest: true })\r\n\t\t\tconst result = await this.props.login({\r\n\t\t\t\tvariables: {\r\n\t\t\t\t\temail,\r\n\t\t\t\t\tpassword\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\tconst token = result.data.login.token\r\n\t\t\tthis.setState({ sendingRequest: false })\r\n\t\t\tthis.props.refreshToken(token)\r\n\t\t} catch (err) {\r\n\t\t\tthis.setState({ error: err.message, sendingRequest: false })\r\n\t\t}\r\n\t}\r\n\trender() {\r\n\t\tconst { email, password, sendingRequest, error } = this.state\r\n\t\treturn (\r\n\t\t\t<Fragment>\r\n\t\t\t\t<MenuDiv>\r\n\t\t\t\t\t<MenuHeader size='large'>\r\n\t\t\t\t\t\t<i>Продукция на участках</i>\r\n\t\t\t\t\t</MenuHeader>\r\n\t\t\t\t</MenuDiv>\r\n\t\t\t\t<SSegment basic>\r\n\t\t\t\t\t<Form error={!!error}>\r\n\t\t\t\t\t\t<Form.Field>\r\n\t\t\t\t\t\t\t<label>E-mail</label>\r\n\t\t\t\t\t\t\t<input \r\n\t\t\t\t\t\t\t\ttype=\"email\" \r\n\t\t\t\t\t\t\t\tplaceholder='E-mail'\r\n\t\t\t\t\t\t\t\tref={ref => this.email = ref} \r\n\t\t\t\t\t\t\t\tonChange={() => this.handleInputChange('email')} />\r\n\t\t\t\t\t\t</Form.Field>\r\n\t\t\t\t\t\t<Form.Field>\r\n\t\t\t\t\t\t\t<label>Пароль</label>\r\n\t\t\t\t\t\t\t<input \r\n\t\t\t\t\t\t\t\ttype=\"password\" \r\n\t\t\t\t\t\t\t\tplaceholder='Пароль'\r\n\t\t\t\t\t\t\t\tref={ref => this.password = ref} \r\n\t\t\t\t\t\t\t\tonChange={() => this.handleInputChange('password')} />\r\n\t\t\t\t\t\t</Form.Field>\r\n\t\t\t\t\t\t<Message\r\n\t\t\t\t\t\t\terror\r\n\t\t\t\t\t\t\theader='Войти не удалось..'\r\n\t\t\t\t\t\t\tcontent={error} />\r\n\t\t\t\t\t\t<Button \r\n\t\t\t\t\t\t\tprimary\r\n\t\t\t\t\t\t\ttype='submit'\r\n\t\t\t\t\t\t\tfloated='right'\r\n\t\t\t\t\t\t\tdisabled={!email || !password || sendingRequest}\r\n\t\t\t\t\t\t\tloading={sendingRequest}\r\n\t\t\t\t\t\t\tonClick={this.submit} >\r\n\t\t\t\t\t\t\tВойти\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</Form>\r\n\t\t\t\t</SSegment>\r\n\t\t\t</Fragment>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nexport default compose(\r\n\tgraphql(login, {\r\n\t\tname: 'login',\r\n\t\toptions: {\r\n\t\t\tfetchPolicy: 'no-cache'\r\n\t\t}\r\n\t})\r\n)(LoginPage)","import gql from 'graphql-tag'\r\n\r\nexport const allDepts = gql`\r\n  query AllDepts {\r\n    depts {\r\n      id\r\n      name\r\n      type\r\n      prods {\r\n        id\r\n        melt\r\n        meltShift\r\n        number\r\n        year\r\n        isSpoiled\r\n        hasDefect\r\n        progress\r\n        htmlNote\r\n        model {\r\n          id\r\n          name\r\n          article\r\n        }\r\n        order {\r\n          id\r\n          fullnum\r\n        }\r\n      }\r\n    }\r\n  }\r\n`\r\n\r\nexport const deptFragment = gql`\r\n  fragment myDept on Dept {\r\n    id\r\n    name\r\n    type\r\n    prods {\r\n      id\r\n      melt\r\n      meltShift\r\n      number\r\n      year\r\n      isSpoiled\r\n      hasDefect\r\n      progress\r\n      htmlNote\r\n      model {\r\n        id\r\n        name\r\n        article\r\n      }\r\n      order {\r\n        id\r\n        fullnum\r\n      }\r\n    }\r\n  }\r\n`","import gql from 'graphql-tag'\r\n\r\nexport const upsertProd = gql`\r\n  mutation UpsertProd ($input: ProdInput!) {\r\n    upsertProd(input: $input) {\r\n      id\r\n      melt\r\n      meltShift\r\n      number\r\n      year\r\n      isSpoiled\r\n      hasDefect\r\n      progress\r\n      htmlNote\r\n      model {\r\n        id\r\n        name\r\n        article\r\n      }\r\n      dept {\r\n        id\r\n      }\r\n      order {\r\n        id\r\n        fullnum\r\n      }\r\n    }\r\n  }\r\n`\r\nexport const moveProds = gql`\r\n  mutation moveProds ( $to: ID!, $prodIds: [ID!]! ) {\r\n    moveProds (\r\n      to: $to,\r\n      prodIds: $prodIds\r\n    ) {\r\n      prods {\r\n        id\r\n        dept {\r\n          id\r\n        }\r\n      }\r\n      to\r\n    }\r\n  }\r\n`","import React from 'react'\r\nimport styled from 'styled-components'\r\n\r\n// S prefix is used throughout the App just to have flexebility (two names for each component)\r\n// N prefix stands for NativeCssImplementation of a component (When html element is styled instead of semantic ui component) \r\n\r\nimport { \r\n\tHeader as SHeader, \r\n\t// Label as SLabel,\r\n\tIcon as SIcon, \r\n\tButton as SButton,\r\n\tMessage as SMessage,\r\n\tPopup as SPopup,\r\n\tInput as SInput,\r\n\tDropdown as SDropdown,\r\n\tForm as SForm\r\n} from 'semantic-ui-react'\r\n\r\nexport const theme = {\r\n\twidths: {\r\n\t\tformLabel: '122px', //required calc(110px + 0.857143em)\r\n\t\tdetailsPL: '55px',\r\n\t\textraSidebar: '250px'\r\n\t},\r\n\tcolors: {\r\n\t\tgreen: '#016936',\r\n\t\tblue: '#0E6EB8',\r\n\t\terror: '#9f3a38',\r\n\t\terrorBorder: '#e0b4b4'\r\n\t}\r\n}\r\nconst getThemeColor = (color) => theme.colors[color] || color\r\nconst baseSet = ({ theme, ai, bt, bb, bc, bs, c, d, fl, flw, fs, fw, h, jc, lh, mw, m, mb, mt, ml, o, ox, oy, p, pl, pr, pt, ta, va, w, ws }) => {\r\n\treturn `\r\n\t\t${ai \t? `align-items: ${ai};`\t\t\t\t\t\t\t\t: ''}\r\n\t\t${bt \t? `border-top: ${bt};`\t\t\t\t\t\t\t\t: ''}\r\n\t\t${bb \t? `border-bottom: ${bb};`\t\t\t\t\t\t\t: ''}\r\n\t\t${bc \t? `background-color: ${bc};`\t\t\t\t\t: ''}\r\n\t\t${bs \t? `box-sizing: ${bs};`\t\t\t\t\t\t\t\t: ''}\r\n\t\t${c \t? `color: ${c};`\t\t\t\t\t\t\t\t\t\t\t: ''}\r\n\t\t${d \t? `display: ${d};`\t\t\t\t\t\t\t\t\t\t: ''}\r\n\t\t${fl \t? `flex: ${fl};`\t\t\t\t\t\t\t\t\t\t\t: ''}\r\n\t\t${flw ? `flex-wrap: ${flw};`\t\t\t\t\t\t\t\t: ''}\r\n\t\t${fs \t? `font-size: ${fs};`\t\t\t\t\t\t\t\t\t: ''}\r\n\t\t${fw \t? `font-weight: ${fw};`\t\t\t\t\t\t\t\t: ''}\r\n\t\t${h \t? `height: ${h};`\t\t\t\t\t\t\t\t\t\t\t: ''}\r\n\t\t${jc \t? `justify-content: ${jc};`\t\t\t\t\t\t: ''}\r\n\t\t${lh \t? `line-height: ${lh};`\t\t\t\t\t\t\t\t: ''}\r\n\t\t${mw \t? `max-width: ${mw};`\t\t\t\t\t\t\t\t\t: ''}\r\n\t\t${m \t? `margin: ${m};`\t\t\t\t\t\t\t\t\t\t\t: ''}\r\n\t\t${mb \t? `margin-bottom: ${mb};`\t\t\t\t\t\t\t: ''}\r\n\t\t${mt \t? `margin-top: ${mt};`\t\t\t\t\t\t\t\t: ''}\r\n\t\t${ml \t? `margin-left: ${ml};`\t\t\t\t\t\t\t\t: ''}\r\n\t\t${o  \t? `opacity: ${o};`\t\t\t\t\t\t\t\t\t\t: ''}\r\n\t\t${ox  ? `overflow-x: ${ox};`\t\t\t\t\t\t\t\t: ''}\r\n\t\t${oy  ? `overflow-y: ${oy};`\t\t\t\t\t\t\t\t: ''}\r\n\t\t${p \t? `padding: ${p};`\t\t\t\t\t\t\t\t\t\t: ''}\r\n\t\t${pl \t? `padding-left: ${pl};`\t\t\t\t\t\t\t: ''}\r\n\t\t${pr \t? `padding-right: ${pr};`\t\t\t\t\t\t\t: ''}\r\n\t\t${pt \t? `padding-top: ${pt};`\t\t\t\t\t\t\t\t: ''}\r\n\t\t${ta \t? `text-align: ${ta};`\t\t\t\t\t\t\t\t: ''}\r\n\t\t${va \t? `vertical-align: ${va};`\t\t\t\t\t\t: ''}\r\n\t\t${w \t? `width: ${w};`\t\t\t\t\t\t\t\t\t\t\t: ''}\r\n\t\t${ws \t? `word-spacing: ${ws};`\t\t\t\t\t\t\t: ''}\r\n\t`\r\n}\r\n\r\nconst DivPropFilter = ({ ml, w, inline, ...rest }) => (\r\n\t<div {...rest} />\r\n)\r\nexport const Div = styled(DivPropFilter)`\r\n\t${props => props.inline && `display: inline-block;`}\r\n\t${props => baseSet(props)}\r\n`\r\n\r\nconst PPropFilter = ({ ...rest }) => (\r\n\t<p {...rest} />\r\n)\r\nexport const P = styled(PPropFilter)`\r\n\t${props => baseSet(props)}\r\n`\r\n\r\nconst SpanPropFilter = ({ ml, ...rest }) => (\r\n\t<span {...rest} />\r\n)\r\nexport const Span = styled(SpanPropFilter)`\r\n\t${props => baseSet(props)}\r\n`\r\n\r\nexport const A = styled.a`\r\n\tcursor: pointer;\r\n\t${props => props.cancel && `{\r\n\t\tpadding-left: 15px;\r\n\t\tcolor: rgba(0,0,0,.87);\r\n\t\t&:hover {\r\n\t\t\tcolor: #B03060;\r\n\t\t}\r\n\t}`}\r\n`\r\n\r\nconst HeaderPropFilter = ({ inline, c, ...rest }) => (\r\n\t<SHeader {...rest} />\r\n)\r\nexport const Header = styled(HeaderPropFilter)`\r\n\t&&&& {\r\n\t\t${props => baseSet(props)}\r\n\t}\r\n\t&&& {\r\n\t\t${props => props.inline && `{\r\n\t\t\tmargin: 0;\r\n\t\t\tpadding: 0 1rem;\r\n\t\t}`}\r\n\t}\r\n`\r\n\r\nconst IconPropFilter = ({ activeColor, ...rest }) => (\r\n\t<SIcon {...rest} />\r\n)\r\nexport const Icon = styled(IconPropFilter)`\r\n\t&&&& {\r\n\t\t${props => baseSet(props)}\r\n\t}\r\n\t&&& {\r\n\t\t${props => props.activeColor && `{\r\n\t\t\t&:hover {\r\n\t\t\t\tcolor: ${getThemeColor(props.activeColor)} !important;\r\n\t\t\t}\r\n\t\t\t&.active {\r\n\t\t\t\tcolor: ${getThemeColor(props.activeColor)} !important;\r\n\t\t\t}\r\n\t\t}`}\r\n\t}\r\n`\r\n\r\nconst DropdownIcon = ({active, disabled, ...rest}) => (\r\n\t<SIcon {...rest}\r\n\t\tname='dropdown'\r\n\t/>\r\n)\r\nexport const Caret = styled(DropdownIcon)`\r\n\ttransform: ${\r\n\t\tprops => !props.active && (\r\n\t\t\tprops.size === 'large'\r\n\t\t\t? 'translateX(0) translateY(0) rotate(-90deg) !important'\r\n\t\t\t: 'translateX(-3px) translateY(3px) rotate(-90deg) !important'\r\n\t\t)\r\n\t};\r\n\t&&& {\r\n\t\t${props => props.disabled && `{\r\n\t\t\tcolor: rgba(0,0,0,.6);\r\n\t\t}`}\r\n\t}\r\n`\r\n\r\nconst ButtonPropFilter = ({ activeColor, menu, ...rest }) => (\r\n\t<SButton {...rest} />\r\n)\r\nexport const Button = styled(ButtonPropFilter)`\r\n\t&&&& {\r\n\t\t${props => baseSet(props)}\r\n\t}\r\n\t&&& {\r\n\t\t&.compact {\r\n\t\t\tpadding: .5rem 1rem;\r\n\t\t}\r\n\t\t${props => props.activeColor && `{\r\n\t\t\t&:hover {\r\n\t\t\t\tcolor: ${getThemeColor(props.activeColor)} !important;\r\n\t\t\t}\r\n\t\t\t&.active {\r\n\t\t\t\tcolor: ${getThemeColor(props.activeColor)} !important;\r\n        \t}\r\n\t\t}`}\r\n\t\t${props => props.menu && `{\r\n\t\t\tmargin: .25rem 0 .25rem 0.5rem;\r\n\t\t\tz-index: 3;\r\n\t\t}`}\r\n\t}\r\n`\r\n\r\nconst MessagePropFilter = ({\r\n\tsection,\r\n\t...rest\r\n}) => (\r\n\t<SMessage {...rest} />\r\n)\r\nexport const Message = styled(MessagePropFilter)`\r\n\t&&&& {\r\n\t\t${props => baseSet(props)}\r\n\t}\r\n\t&&& {\r\n\t\t${props => props.section && `\r\n\t\t\tmargin-top: 0;\r\n\t\t\tpadding-left: ${props.theme.widths.detailsPL};\r\n\t\t\tbox-shadow: 0 0 0 1px #e0b4b4, 0 0 0 0 transparent;\r\n\t\t\tborder-radius: 0;\r\n\t\t`}\r\n\t}\r\n`\r\n\r\nconst SectionPropFiltered = ({\r\n\thead,\r\n\tminor,\r\n\tsmall,\r\n\tsecondary,\r\n\tnoP,\r\n\tnoLP,\r\n\tnoIndent,\r\n\ttopBorder,\r\n\tbottomBorder,\r\n\tchildren,\r\n\tonClick,\r\n\t...rest\r\n}) => (\r\n\t\t<div\r\n\t\t\t{...rest}\r\n\t\t\tonClick={onClick || undefined}\r\n\t\t>\r\n\t\t\t{children}\r\n\t\t</div>\r\n)\r\nexport const Section = styled(SectionPropFiltered)`\r\n\twidth: 100%;\r\n\tpadding: 1em 1em 1em 55px;\r\n\t${props => props.head && `{\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tpadding-top: 0;\r\n\t\tpadding-bottom: 0;\r\n\t}`}\r\n\t${props => props.onClick && `{\r\n\t\tcursor: pointer;\r\n\t}`}\r\n\t${props => props.minor && `{\r\n\t\tmin-height: 3.5em;\r\n\t}`}\r\n\t${props => !props.size && props.head && `{\r\n\t\tmin-height: 3.5em;\r\n\t}`}\r\n\t${props => props.size === 'small' && `{\r\n\t\tmin-height: 2.5em;\r\n\t}`}\r\n\t${props => props.secondary && `{\r\n\t\tbackground: #f3f4f5;\r\n\t\tcolor: rgba(0,0,0,.6);\r\n\t}`}\r\n\t${props => props.noLP && `{\r\n\t\tpadding-left: 0;\r\n\t}`}\r\n\t${props => props.noIndent && `{\r\n\t\tpadding-left: 1em;\r\n\t}`}\r\n\t${props => props.topBorder && `{\r\n\t\tborder-top: 1px solid ${props.topBorder === 'dark' ? 'rgba(152, 153, 154, 1)' : 'rgba(34,36,38,.15)'};\r\n\t}`}\r\n\t${props => props.bottomBorder && `{\r\n\t\tborder-bottom: 1px solid ${props.bottomBorder === 'dark' ? 'rgba(126, 127, 129, 1)' : 'rgba(34,36,38,.1)'};\r\n\t}`}\r\n`\r\n\r\nconst PopupPropFilter = ({ showIf, ...rest }) => (\r\n\t<SPopup {...rest} />\r\n)\r\nexport const Popup = styled(PopupPropFilter)`\r\n\t&&& {\r\n\t\t${props => !props.showIf && `{\r\n\t\t\topacity: 0;\r\n\t\t}`}\r\n\t}\r\n`\r\n\r\nexport const Label = styled.label`\r\n\t${props => baseSet(props)}\r\n\twidth: ${props => props.theme.widths.formLabel} !important;\r\n\tmargin-right: 0 !important;\r\n`\r\n\r\nconst InputPropFilter = ({ w, ...rest }) => (\r\n\t<SInput {...rest} />\r\n)\r\nexport const Input = styled(InputPropFilter)`\r\n\t&&&& {\r\n\t\t${props => baseSet(props)}\r\n\t}\r\n`\r\n\r\nexport const Dropdown = styled(SDropdown)`\r\n\t&&&& {\r\n\t\t${props => baseSet(props)}\r\n\t}\r\n`\r\n\r\nconst FormFieldPropFilter = ({ w, ...rest }) => (\r\n\t<SForm.Field {...rest} />\r\n)\r\nexport const FormField = styled(FormFieldPropFilter)`\r\n\t&&&& {\r\n\t\t${props => baseSet(props)}\r\n\t}\r\n`","import React, { Component } from 'react'\r\nimport { graphql, compose } from 'react-apollo'\r\nimport gql from 'graphql-tag'\r\nimport { Modal, Form, Icon, Button, Label, Message } from 'semantic-ui-react';\r\n\r\nimport styled from 'styled-components'\r\nimport { upsertProd } from '../graphql/prod'\r\nimport { deptFragment } from '../graphql/dept'\r\nimport { Div } from './shared/styled-semantic';\r\n\r\nconst allDeptsAndModelsQuery = gql`\r\n  query allDeptsAndModelsQuery {\r\n    depts {\r\n      id\r\n      name\r\n    }\r\n    models {\r\n      id\r\n      name\r\n    }\r\n  }\r\n`\r\n\r\nconst EqualField = styled.div`\r\n  margin: 0 5px 1em 5px;\r\n  flex: 1 0 150px;\r\n`\r\n\r\nclass CRUProdModal extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      open: false,\r\n      deptId: '',\r\n      modelId: '',\r\n      melt: '',\r\n      meltShift: '',\r\n      number: '',\r\n      year: '',\r\n      progress: '',\r\n      hasDefect: false,\r\n      isSpoiled: false,\r\n      deptIdErr: false,\r\n      modelIdErr: false,\r\n      meltErr: false,\r\n      meltShiftErr: false,\r\n      numberErr: false,\r\n      yearErr: false,\r\n      progressErr: false,\r\n      err: null\r\n    }\r\n    if (props.mode === 'edit') {\r\n      this.state = {\r\n        ...this.state,\r\n        ...props.prod\r\n      }\r\n      // replace nulls with '' for React controlled components to work\r\n      for(let k in this.state) {(this.state[k] === null) && (this.state[k] = '')}\r\n    }\r\n  }\r\n  open = () => this.setState({ open: true })\r\n  close = () => this.setState({ open: false })\r\n  handleSelChange = (event, {name, value, required}) => {\r\n    //style input as warning if value is not appropriate\r\n    const warn = (value === '' && required) ? true : false\r\n    this.setState({\r\n      [name]: value,\r\n      [`${name}Err`]: warn\r\n    })\r\n    console.log(`Selected: ${ value}`)\r\n  }\r\n  handleIntChange = (event, {name, value, min, max, required}) => {\r\n    //in case of an error keep empty string for React controlled component\r\n    const intValue = parseInt(value, 10) || (parseInt(value, 10) === 0 ? 0 : '')\r\n    //style input as warning if value is not appropriate\r\n    const warn = (intValue === '' && !required) ? false : (intValue < min || max < intValue)\r\n    this.setState({\r\n      [name]: intValue,\r\n      [`${name}Err`]: warn\r\n    })\r\n  }\r\n  changeStatus = (e, {name}) => {\r\n    e.preventDefault()\r\n    e.stopPropagation()\r\n    const curVal = this.state[name]\r\n    // reset statuses\r\n    this.setState({\r\n      hasDefect: false,\r\n      isSpoiled: false\r\n    })\r\n    // if supposed, activate status\r\n    if (!curVal) {\r\n      this.setState({ [name]: true })\r\n    }\r\n  }\r\n  confirm = async () => {\r\n    const mode = this.props.mode\r\n    //VALIDATION\r\n    const requiredFields = (mode === 'create') ?\r\n      ['deptId', 'modelId', 'melt', 'number', 'year'] :\r\n      ['melt', 'number', 'year']\r\n    let shouldExit = false\r\n    //check for empty required fields and setting corresponding errors\r\n    // @ts-ignore\r\n    this.setState(Object.assign(...requiredFields.map(field => {\r\n      if (this.state[field] === '') {\r\n        shouldExit = true\r\n        return ({[`${field}Err`]: true})\r\n      }\r\n      return false\r\n    })))\r\n    //check for other Form errors\r\n    requiredFields.forEach((field) => {\r\n      if (this.state[`${field}Err`]) { shouldExit = true }\r\n    })\r\n    //terminate if validation failed\r\n    if (shouldExit) {return null}\r\n    const { id, deptId, modelId, melt, number, year } = this.state\r\n    const meltShift = this.state.meltShift || null\r\n    const progress = this.state.progress || null\r\n    const hasDefect = this.state.hasDefect || null\r\n    const isSpoiled = this.state.isSpoiled || null\r\n    const input = {\r\n      deptId,\r\n      modelId,\r\n      melt,\r\n      meltShift,\r\n      number,\r\n      year,\r\n      progress,\r\n      hasDefect,\r\n      isSpoiled\r\n    }\r\n    if (mode === 'edit') input.id = id\r\n    try {\r\n      await this.props.upsertProd({\r\n        variables: {\r\n          input: { ...input }\r\n        }\r\n      })\r\n      this.setState({ err: null })\r\n      this.close()\r\n    } catch (err) {\r\n      console.log('err > ', err)\r\n      this.setState({ err })\r\n    }\r\n  }\r\n  render() {\r\n    const { open, deptId, modelId, melt, meltShift, number, year, progress, hasDefect, isSpoiled, deptIdErr, modelIdErr, meltErr, meltShiftErr, numberErr, yearErr, progressErr, err } = this.state\r\n    const { trigger, mode } = this.props\r\n    let deptOptions = [{ text: 'Участок ', value: '' }]\r\n    let modelOptions = [{ text: 'Вид продукции', value: '' }]\r\n    if (mode === 'create') {\r\n      const query = this.props.allDeptsAndModelsQuery\r\n      deptOptions = !query ? [ { text: 'Участок ', value: '' } ] :\r\n        query.loading ? [ { text: 'Загрузка списка', value: '' } ] :\r\n        query.error ? [ { text: 'Ошибка загрузки списка', value: '' } ] :\r\n        query.depts.map(dept => ({\r\n          text: dept.name,\r\n          value:  dept.id\r\n        })).sort((a, b) => a.text > b.text ? 1 : -1)\r\n      modelOptions = !query ? [ { text: 'Вид продукции', value: '' } ] :\r\n      query.loading ? [ { text: 'Загрузка списка', value: '' } ] :\r\n      query.error ? [ { text: 'Ошибка загрузки списка', value: '' } ] :\r\n      query.models.map(model => {\r\n        return {\r\n          text: model.name,\r\n          value:  model.id\r\n        }\r\n      })\r\n    } else if (mode === 'edit') {\r\n\r\n    }\r\n    return (\r\n      <Modal\r\n        trigger = { trigger }\r\n        open={open}\r\n        onOpen={this.open}\r\n        onClose={this.close}\r\n      >\r\n        <Modal.Header as='h2'>{mode === 'create' ? 'Добавить' : 'Редактировать'} продукцию </Modal.Header>\r\n        <Modal.Content>\r\n          <Form onSubmit={() => this.confirm()} error={!!(err && err.message)}>\r\n            { (mode === 'create') &&\r\n              <Form.Select label='Участок' name='deptId' options={deptOptions} \r\n                onChange={this.handleSelChange} value={deptId} error={deptIdErr} required \r\n                search noResultsMessage='Ничего не найдено..'\r\n              />\r\n            }\r\n            { (mode === 'create') &&\r\n              <Form.Select label='Вид продукции' name='modelId' options={modelOptions} onChange={this.handleSelChange} \r\n                value={modelId} error={modelIdErr} required search noResultsMessage='Ничего не найдено..'/>\r\n            }\r\n            <Div\r\n              d='flex'\r\n              jc='stretch'\r\n              ai='flex-end'\r\n              flw='wrap'\r\n              m='0 -5px'\r\n            >\r\n              <EqualField>\r\n                <Form.Input label='Плавка' placeholder='Плавка' required\r\n                  name='melt' type='number' min='0' max='999' error={meltErr}\r\n                  onChange={this.handleIntChange} value={melt}/>\r\n              </EqualField>\r\n              <EqualField>\r\n                <Form.Input label='Плав. смена (если промаркирована)' placeholder='Пл. смена'\r\n                  name='meltShift' type='number' min='0' max='3' error={meltShiftErr}\r\n                  onChange={this.handleIntChange} value={meltShift}/>\r\n              </EqualField>\r\n              <EqualField>\r\n                <Form.Input label='Номер' placeholder='Номер' required\r\n                  name='number' type='number' min='1' max='999' error={numberErr}\r\n                  onChange={this.handleIntChange} value={number}/>\r\n              </EqualField>\r\n              <EqualField>\r\n                <Form.Input label='Год' placeholder='Год' required\r\n                  name='year' type='number' min='16' max={new Date().getFullYear().toString().slice(2,4)} error={yearErr}\r\n                  onChange={this.handleIntChange} value={year}/>\r\n              </EqualField>\r\n            </Div>\r\n            <Form.Input label='Процент завершения' placeholder='%'\r\n              name='progress' type='number' min='0' max='100' error={progressErr}\r\n              onChange={this.handleIntChange} value={progress}/>\r\n            <Form.Field>\r\n              <label>Наличие дефектов</label>\r\n              <Button.Group>\r\n                <Button name='hasDefect'\r\n                  active={hasDefect || null}\r\n                  color={hasDefect ? 'orange' : null}\r\n                  onClick={this.changeStatus}\r\n                >Отклонение</Button>\r\n                <Button name='isSpoiled'\r\n                  active={isSpoiled || null}\r\n                  color={isSpoiled ? 'red' : null}\r\n                  onClick={this.changeStatus}\r\n                >Брак</Button>\r\n              </Button.Group>\r\n            </Form.Field>\r\n            <Message\r\n              error\r\n              header={`${mode === 'create' ? 'Добавить' : 'Сохранить'} не удалось..`}\r\n              content={err && err.message}\r\n            />\r\n          </Form>\r\n        </Modal.Content>\r\n        <Modal.Actions>\r\n          <Button onClick={this.close} color='red'>\r\n            <Icon name='remove' /> Отмена\r\n          </Button>\r\n          <Button onClick={this.confirm}>\r\n            <Icon name='checkmark' /> {mode === 'create' ? 'Добавить' : 'Сохранить'}\r\n          </Button>\r\n        </Modal.Actions>\r\n      </Modal>\r\n    )\r\n  }\r\n}\r\n\r\nexport default compose(\r\n  graphql(allDeptsAndModelsQuery, { name: 'allDeptsAndModelsQuery' }),\r\n  graphql(upsertProd, {\r\n    name: 'upsertProd',\r\n    options: {\r\n      update: (cache, {data: reponseData}) => {\r\n\t\t\t\tconst newProd = reponseData.upsertProd\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tconst id = `Dept:${newProd.dept.id}`\r\n\t\t\t\tconst fragment = deptFragment\r\n\t\t\t\tlet data = cache.readFragment({\r\n\t\t\t\t\tid,\r\n\t\t\t\t\tfragment\r\n        })\r\n        delete newProd.dept\r\n        if (!data.prods) data.prods = []\r\n\t\t\t\tdata.prods = [...data.prods.filter(p => p.id !== newProd.id), newProd]\r\n\t\t\t\tcache.writeFragment({\r\n\t\t\t\t\tid,\r\n\t\t\t\t\tfragment,\r\n\t\t\t\t\tdata\r\n\t\t\t\t})\r\n\t\t\t},\r\n      // refetchQueries: ['allDepts']\r\n    }\r\n  }),\r\n)(CRUProdModal)\r\n","import React, { Component } from 'react'\r\nimport { graphql } from 'react-apollo'\r\nimport gql from 'graphql-tag'\r\nimport { Modal, Form, Icon, Button } from 'semantic-ui-react'\r\n\r\nconst AllDeptsAndModelsQuery = gql`\r\n  query AllDeptsAndModelsQuery {\r\n    depts {\r\n      id\r\n      name\r\n    }\r\n  }\r\n`\r\n\r\nclass MoveModal extends Component {\r\n  state = {\r\n    open: false,\r\n    deptId: ''\r\n  }\r\n  open = () => this.setState({ open: true })\r\n  close = () => this.setState({ open: false })\r\n  handleChange = (event, e) => {\r\n    if (e) {\r\n      // console.log(value);\r\n      this.setState({deptId: e.value})\r\n      console.log(`Selected: ${ e.value}`)\r\n    }\r\n  }\r\n  confirm = () => {\r\n    const { deptId } = this.state\r\n    this.props.moveProds(deptId)\r\n    this.close()\r\n  }\r\n  render() {\r\n    const { open, deptId } = this.state\r\n    const { trigger } = this.props\r\n    const query = this.props.AllDeptsAndModelsQuery\r\n    const deptOptions = !query ? [ { text: 'Участок ', value: '' } ] :\r\n      query.loading ? [ { text: 'Загрузка списка', value: '' } ] :\r\n      query.error ? [ { text: 'Ошибка загрузки списка', value: '' } ] :\r\n      query.depts.map(dept => {\r\n        return {\r\n          text: dept.name,\r\n          value:  dept.id\r\n        }\r\n      })\r\n    return (\r\n      <Modal\r\n        trigger={trigger}\r\n        open={open}\r\n        onOpen={this.open}\r\n        onClose={this.close}\r\n      >\r\n        <Modal.Header as='h2'> Отправить продукцию </Modal.Header>\r\n        <Modal.Content>\r\n          <Form onSubmit={this.confirm}>\r\n            <Form.Select label='Куда' options={deptOptions} onChange={this.handleChange} value={deptId} required/>\r\n          </Form>\r\n        </Modal.Content>\r\n        <Modal.Actions>\r\n          <Button onClick={this.close} color='red'>\r\n            <Icon name='remove' /> Отмена\r\n          </Button>\r\n          <Button onClick={this.confirm}>\r\n            <Icon name='arrow right' /> Отправить\r\n          </Button>\r\n        </Modal.Actions>\r\n      </Modal>\r\n    )\r\n  }\r\n}\r\n\r\nexport default graphql(AllDeptsAndModelsQuery, { name: 'AllDeptsAndModelsQuery' })(MoveModal)\r\n","import React from 'react'\r\nimport _ from 'lodash'\r\n\r\nimport { Menu, Icon, Dropdown} from 'semantic-ui-react'\r\nimport CRUProdModal from './CRUProdModal'\r\nimport MoveModal from './MoveModal'\r\n\r\nconst allTypes = [{\r\n  type: 'OWNED',\r\n  title: 'Наши'\r\n},{\r\n  type: 'TRANSPORT',\r\n  title: 'Транспорт'\r\n},{\r\n  type: 'PARTNER',\r\n  title: 'Подрядчики'\r\n},{\r\n  type: 'CLIENT',\r\n  title: 'Клиенты'\r\n}]\r\n\r\nconst NavBar = ({ refreshToken, visibleDeptTypes, filterDeptType, moveProds }) => {\r\n  return (\r\n    <Menu size='huge' inverted >\r\n      <Menu.Item header>KOMZ</Menu.Item>\r\n      <Menu.Menu>\r\n        {/* <Menu.Item icon name='home' as={ NavLink } exact to='/' color='grey'>\r\n          <Icon name='home' />\r\n        </Menu.Item> */}\r\n        <CRUProdModal mode='create' id='' trigger={\r\n          <Menu.Item icon link name='create' color='grey'>\r\n            <Icon name='plus' />\r\n          </Menu.Item>\r\n        } />\r\n        <MoveModal moveProds={moveProds} trigger={\r\n          <Menu.Item icon link name='move' color='grey'>\r\n            <Icon name='arrow right' />\r\n          </Menu.Item>\r\n        } />\r\n      </Menu.Menu>\r\n      <Menu.Menu position='right'>\r\n        <Dropdown item icon='setting' simple className='komz-navBarSettingsItem'>\r\n          <Dropdown.Menu>\r\n            <Dropdown.Header>Участки</Dropdown.Header>\r\n            {allTypes.map(({ type, title }) => {\r\n              const active = _.includes(visibleDeptTypes, type)\r\n              return (\r\n                <Dropdown.Item\r\n                  key={type}\r\n                  type={type}\r\n                  active={_.includes(visibleDeptTypes, type)}\r\n                  onClick={(e, t) => filterDeptType(t.type)}\r\n                >\r\n                  <Icon name={active ? 'checkmark box' : 'square outline'} />\r\n                  {title}\r\n                </Dropdown.Item>\r\n            )})}\r\n          </Dropdown.Menu>\r\n        </Dropdown>\r\n        <Menu.Item\r\n          icon\r\n          onClick={() => refreshToken(null)}\r\n        >\r\n          <Icon name='sign out' />\r\n        </Menu.Item>\r\n      </Menu.Menu>\r\n    </Menu>\r\n  )\r\n}\r\n\r\nexport default NavBar\r\n","import React, { Component } from 'react'\r\nimport { List, Progress, Label, Button } from 'semantic-ui-react'\r\nimport CRUProdModal from './CRUProdModal'\r\n\r\nclass ProdItem extends Component {\r\n  state = {\r\n    checked: false,\r\n  }\r\n\r\n  handleClick = (e, d) => {\r\n    const { checked } = this.state\r\n    const { id } = this.props.prod\r\n    this.setState({checked: !checked})\r\n    this.props.selectProd(id)\r\n  }\r\n\r\n  // TODO solve problem: unable to stopPropagation!\r\n  preventPropagation = (e, eb) => {\r\n    // e.preventDefault()\r\n    e.stopPropagation()\r\n  }\r\n\r\n  render() {\r\n    const {checked} = this.state\r\n    const {melt, meltShift, number, year, progress, isSpoiled, hasDefect, order} = this.props.prod\r\n\r\n    return (\r\n      <List.Item onClick={this.handleClick} active={checked}>\r\n        <List.Content>\r\n          <List.Content floated='right'>\r\n            {/* <Button attached='right'>Edit</Button> */}\r\n            {/* <Button size='mini' onClick={this.preventPropagation}>Edit</Button> */}\r\n            {/* <Button size='mini' icon='edit' onClick={this.preventPropagation} /> */}\r\n            {/* <Button size='mini' content='Редакт' icon='edit' labelPosition='right' onClick={this.preventPropagation} /> */}\r\n            {/* <List.Icon name='edit' onClick={this.edit} /> */}\r\n            <CRUProdModal mode='edit' prod={this.props.prod} trigger={\r\n              <Button size='mini' content='Редакт' icon='edit' labelPosition='right' onClick={this.preventPropagation} />\r\n            } />\r\n          </List.Content>\r\n          <List.Content>\r\n            <List.Icon name={checked ? 'checkmark box' : 'square outline'} />\r\n            {melt}{(meltShift > 0) && '.'+meltShift}-{number}-{year}\r\n            { progress &&\r\n              <Label size='small'>{progress || '_'}%</Label>\r\n            }\r\n            { hasDefect &&\r\n              <Label color='orange' tag size='small'>ОТКЛОНЕНИЕ</Label>\r\n            }\r\n            { isSpoiled &&\r\n              <Label color='red' tag size='small'>БРАК</Label>\r\n              // <List.Icon floated='right' name='broken chain' color='red' />\r\n            }\r\n            { !!order &&\r\n              <Label color='brown' tag size='small'>{'ЗАКАЗ № ' + order.fullnum}</Label>\r\n              // <List.Icon floated='right' name='broken chain' color='red' />\r\n            }\r\n          </List.Content>\r\n\r\n        </List.Content>\r\n        { progress &&\r\n          <Progress percent={progress} indicating autoSuccess attached='bottom' />\r\n        }\r\n      </List.Item>\r\n    )\r\n  }\r\n}\r\n\r\nexport default ProdItem\r\n","import React, { Component } from 'react'\r\n\r\nimport { List } from 'semantic-ui-react'\r\nimport ProdItem from './ProdItem'\r\n\r\nclass ProdList extends Component {\r\n  render() {\r\n\r\n    const prods = this.props.prods\r\n\r\n    return (\r\n      <List divided selection size='medium'>\r\n        {prods.map((prod) => <ProdItem prod={prod} key={prod.id} selectProd={this.props.selectProd}/>)}\r\n      </List>\r\n    )\r\n  }\r\n}\r\n\r\nexport default ProdList\r\n","import React, { Component } from 'react'\r\nimport _ from 'lodash'\r\n\r\nimport styled from 'styled-components'\r\nimport { Accordion, Icon, Label, Header } from 'semantic-ui-react'\r\nimport ProdList from './ProdList'\r\n\r\nconst AccordionTitle = styled(Accordion.Title)`\r\n  &&&& {\r\n    margin-top: 0;\r\n    padding-top: 0;\r\n    ${props => props.active && `{\r\n      padding-bottom: 0;\r\n    }`}\r\n  }\r\n`\r\nconst AccordionContent = styled(Accordion.Content)`\r\n  &&&& {\r\n    padding-top: 0;\r\n  }\r\n`\r\n\r\nclass ModelList extends Component {\r\n\r\n  state = { activeIndex: [] }\r\n\r\n  handleClick = (e, titleProps) => {\r\n    const { index } = titleProps\r\n    const { activeIndex } = this.state\r\n    const newIndex = _.includes(activeIndex, index) ? _.without(activeIndex, index) : [...activeIndex, index]\r\n\r\n    this.setState({ activeIndex: newIndex })\r\n  }\r\n\r\n  render() {\r\n\r\n    const { activeIndex } = this.state\r\n\r\n    const deptModels = this.props.deptModels.map((deptModel, i) => {\r\n      const prods = deptModel.prods\r\n      const allProdsCount = prods.length\r\n      const prodsReadyCount = prods.filter(p => p.progress === 100).length\r\n      const prodsDefectCount = prods.filter(p => p.hasDefect).length\r\n      const prodsSpoiledCount = prods.filter(p => p.isSpoiled).length\r\n      const prodsInProgressCount = allProdsCount - prodsReadyCount - prodsSpoiledCount\r\n      const prodsOrderedCount = prods.filter(p => !!p.order).length\r\n\r\n      const { id } = deptModel\r\n      const active = _.includes(activeIndex, id)\r\n\r\n      return (\r\n        <div key={id + '_deptModel'} >\r\n          <AccordionTitle\r\n            active={active}\r\n            index={id}\r\n            onClick={this.handleClick}\r\n          >\r\n            <Icon name='dropdown' />\r\n            <Header size='small' as='span'>{deptModel.model.name}\r\n              <Label color='grey'>\r\n                {allProdsCount}\r\n                <Label.Detail>шт</Label.Detail>\r\n              </Label>\r\n            </Header>\r\n            <Label.Group className='komz-ml-21px'>\r\n              {(prodsReadyCount > 0) &&\r\n                <Label basic>\r\n                  <Icon name='checkmark' color='green' />\r\n                  {prodsReadyCount}\r\n                  <Label.Detail>ГП</Label.Detail>\r\n                </Label>\r\n              }\r\n              {(prodsInProgressCount > 0) &&\r\n                <Label basic>\r\n                  {prodsInProgressCount}\r\n                  <Label.Detail>НЗП</Label.Detail>\r\n                </Label>\r\n              }\r\n              {(prodsDefectCount > 0) &&\r\n                <Label basic>\r\n                  <Icon name='warning sign' color='orange' />\r\n                  {prodsDefectCount}\r\n                  <Label.Detail>ОТКЛОН</Label.Detail>\r\n                </Label>\r\n              }\r\n              {(prodsSpoiledCount > 0) &&\r\n                <Label basic>\r\n                  <Icon name='broken chain' color='red' />\r\n                  {prodsSpoiledCount}\r\n                  <Label.Detail>БРАК</Label.Detail>\r\n                </Label>\r\n              }\r\n              {(prodsOrderedCount > 0) &&\r\n                <Label basic>\r\n                  <Icon name='gavel' color='brown' />\r\n                  {prodsOrderedCount}\r\n                  <Label.Detail>РЕЗЕРВ</Label.Detail>\r\n                </Label>\r\n              }\r\n            </Label.Group>\r\n          </AccordionTitle>\r\n          {active &&\r\n            <AccordionContent active>\r\n              <ProdList prods={deptModel.prods} selectProd={this.props.selectProd} />\r\n            </AccordionContent>\r\n          }\r\n        </div>\r\n      )\r\n    })\r\n\r\n    return (\r\n      <Accordion>\r\n        {deptModels}\r\n      </Accordion>\r\n    )\r\n  }\r\n}\r\n\r\nexport default ModelList\r\n","import React from 'react'\r\n\r\nimport styled from 'styled-components'\r\nimport { Icon } from 'semantic-ui-react'\r\nimport { Section, Caret } from './styled-semantic'\r\n\r\nconst SIcon = styled(Icon)`\r\n\t&&& {\r\n\t\tbox-sizing: content-box;\r\n\t\twidth: calc(35px - 1em);\r\n\t\tmargin: 0 0.5em;\r\n\t}\r\n`\r\nconst SCaret = styled(Caret)`\r\n\t&&& {\r\n\t\tbox-sizing: content-box;\r\n\t\twidth: calc(35px - 1em);\r\n\t\tmargin: 0 0.5em;\r\n\t}\r\n`\r\n\r\nconst DetailsHeaderContainer = ({ closeDetails, expanded, onClick, children }) => {\r\n\tconst headerType = !!closeDetails ? 'main' : 'expandable'\r\n\treturn (\r\n\t\t<Section\r\n\t\t\thead\r\n\t\t\tnoIndent\r\n\t\t\tbottomBorder\r\n\t\t\tminor\r\n\t\t\tonClick={onClick}\r\n\t\t>\r\n\t\t\t{headerType === 'main'\r\n\t\t\t\t?\t<SIcon link\r\n\t\t\t\t\t\tsize='big'\r\n\t\t\t\t\t\tname='cancel'\r\n\t\t\t\t\t\tonClick={closeDetails}\r\n\t\t\t\t\t/>\r\n\t\t\t\t:\t<SCaret\r\n\t\t\t\t\t\tsize='large'\r\n\t\t\t\t\t\tactive={expanded ? 1 : 0}\r\n\t\t\t\t\t/>\r\n\t\t\t}\r\n\t\t\t{children}\r\n\t\t</Section>\r\n\t)\r\n}\r\n\r\nexport default DetailsHeaderContainer\r\n","import React from 'react'\r\n\r\nimport { Span } from './styled-semantic'\r\n\r\nconst DetailsHeaderSubitle = ({ text }) => {\r\n\treturn (\r\n\t\t<Span\r\n\t\t\tml='10px'\r\n\t\t\tfs='1rem'\r\n\t\t\tc='rgba(0,0,0,.6)'\r\n\t\t\tws='0.5em'\r\n\t\t>\r\n\t\t\t{text}\r\n\t\t</Span>\r\n\t)\r\n}\r\n\r\nexport default DetailsHeaderSubitle\r\n","import React from 'react'\r\n\r\nimport { Header } from './styled-semantic'\r\nimport DetailsHeaderSubitle from './DetailsHeaderSubitle'\r\n\r\nconst DetailsHeaderTitle = ({ title, subtitle, titleSize }) => {\r\n\treturn (\r\n\t\t<Header\r\n\t\t\tm='0'\r\n\t\t\tsize={titleSize || 'medium'}\r\n\t\t>\r\n\t\t\t{title}\r\n\t\t\t{subtitle &&\r\n\t\t\t\t<DetailsHeaderSubitle\r\n\t\t\t\t\ttext={subtitle}\r\n\t\t\t\t/>\r\n\t\t\t}\r\n\t\t</Header>\r\n\t)\r\n}\r\n\r\nexport default DetailsHeaderTitle\r\n","import React, { Component } from 'react'\r\n\r\nimport DetailsHeaderContainer from './DetailsHeaderContainer'\r\nimport DetailsHeaderTitle from './DetailsHeaderTitle'\r\n\r\nclass DetailsHeader extends Component {\r\n\trender() {\r\n\t\tconst { expanded, title, subtitle, titleSize, onClick } = this.props\r\n\t\treturn (\r\n\t\t\t<DetailsHeaderContainer\r\n\t\t\t\texpanded={expanded}\r\n\t\t\t\tonClick={onClick}\r\n\t\t\t>\r\n\t\t\t\t<DetailsHeaderTitle\r\n\t\t\t\t\ttitle={title}\r\n\t\t\t\t\tsubtitle={subtitle}\r\n\t\t\t\t\ttitleSize={titleSize}\r\n\t\t\t\t/>\r\n\t\t\t\t{/* { id !== 'new' &&\r\n\t\t\t\t\t<DetailsHeaderButtons\r\n\t\t\t\t\t\teditMode={editMode || false}\r\n\t\t\t\t\t\tedit={() => setDetails({type, id, editMode: true})}\r\n\t\t\t\t\t/>\r\n\t\t\t\t} */}\r\n\t\t\t</DetailsHeaderContainer>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nexport default DetailsHeader\r\n","import React, { Component } from 'react'\r\n\r\nimport styled from 'styled-components'\r\nimport { Section } from './styled-semantic'\r\n\r\nimport DetailsHeader from './DetailsHeader'\r\n\r\nconst OuterSection = styled(Section)`\r\n  &&&& { \r\n    padding: 0;\r\n    ${props => props.expanded && `{\r\n      margin-top: -1px;\r\n      border-bottom-color: rgba(34, 36, 38, 0.15);\r\n    }`}\r\n  }\r\n`\r\nconst SSection = styled(Section)`\r\n  &&&& { \r\n    padding-top: 0;\r\n  }\r\n`\r\n\r\nclass CollapsableSection extends Component {\r\n  state = {\r\n    expanded: false\r\n  }\r\n  render() {\r\n    const { expanded } = this.state\r\n    const { title, subtitle, children, size } = this.props\r\n    return (\r\n      <OuterSection\r\n        expanded={expanded ? 1 : 0}\r\n        topBorder={expanded}\r\n        bottomBorder={expanded}\r\n      >\r\n        <DetailsHeader\r\n          expanded={expanded}\r\n          title={title}\r\n          subtitle={subtitle}\r\n          titleSize={size || 'small'}\r\n          onClick={() => this.setState({ expanded: !expanded})}\r\n        />\r\n          {expanded &&\r\n            <SSection>\r\n              {children}\r\n            </SSection>\r\n          }\r\n      </OuterSection>\r\n    )\r\n  }\r\n}\r\n\r\nexport default CollapsableSection\r\n","import React, { Component } from 'react'\r\nimport _ from 'lodash'\r\n\r\nimport styled from 'styled-components'\r\nimport { Accordion, Segment } from 'semantic-ui-react'\r\n\r\nimport ModelList from './ModelList'\r\nimport CollapsableSection from './shared/CollapsableSection';\r\n\r\nconst SSegment = styled(Segment)`\r\n  &&&& {\r\n    padding: 0;\r\n  }\r\n`\r\n\r\nclass DeptList extends Component {\r\n  render() {\r\n    const { depts: propDepts } = this.props\r\n    const depts = _.cloneDeep(propDepts).map(d => ({\r\n      ...d,\r\n      prodsCount: d.prods.length,\r\n      deptModels: _(d.prods).sortBy('model.name').groupBy('model.id').reduce(\r\n        function (dMs, prods) {\r\n          dMs.push({\r\n            id: prods[0].model.id,\r\n            model: { ...prods[0].model },\r\n            prods: _.sortBy(prods.map(p => {\r\n              delete p.model\r\n              return p\r\n            }), function(o) { return -(o.progress || !o.progress); })\r\n          })\r\n          return dMs\r\n        }, []\r\n      ),\r\n      prods: 'cleared'\r\n    }))\r\n    // console.log('depts > ', depts)\r\n    return (\r\n      <Accordion fluid>\r\n        {depts.map((dept, i) => {\r\n          return (\r\n            <SSegment\r\n              key={dept.id}\r\n              color={\r\n                dept.type === 'TRANSPORT' ? 'green' :\r\n                dept.type === 'PARTNER' ? 'blue' :\r\n                dept.type === 'CLIENT' ? 'purple' :\r\n                'black'\r\n            }>\r\n              <CollapsableSection\r\n                size='large'\r\n                title={dept.name}\r\n                subtitle={`(${dept.prodsCount})`}\r\n              >\r\n                <ModelList deptModels={dept.deptModels} selectProd={this.props.selectProd}/>\r\n              </CollapsableSection>\r\n            </SSegment>\r\n          )}\r\n        )}\r\n      </Accordion>\r\n    )\r\n  }\r\n\r\n}\r\n\r\nexport default DeptList\r\n","import React from 'react'\r\nimport { Message, Icon } from 'semantic-ui-react'\r\n\r\nconst DataLoadErrorMessage = (props) => {\r\n  return (\r\n    <Message warning>\r\n      <p><Icon name='warning' />\r\n      <b>Ошибка загрузки данных {props.dataTitle}</b></p>\r\n      <p><u>Попробуйте следующее:</u></p>\r\n      <p>1. Обновить страницу</p>\r\n      <p>2. Заново войти в систему</p>\r\n      <p>3. Если ошибка сохранится, сообщите Администратору</p>\r\n      <p>4. Возможно, нарушены права доступа</p>\r\n    </Message>\r\n  )\r\n}\r\nexport default DataLoadErrorMessage\r\n","import React, { Component } from 'react'\r\nimport _ from 'lodash'\r\n\r\nimport { graphql, compose } from 'react-apollo'\r\nimport { allDepts } from '../graphql/dept'\r\nimport { moveProds } from '../graphql/prod'\r\n\r\nimport { Container } from 'semantic-ui-react'\r\n\r\nimport NavBar from './NavBar'\r\nimport DeptList from './DeptList'\r\nimport DataLoadErrorMessage from './common/DataLoadErrorMessage'\r\n\r\nclass Store extends Component {\r\n  state={\r\n    selectedProds: [],\r\n    visibleDeptTypes: ['OWNED', 'TRANSPORT']\r\n  }\r\n  selectProd = (prodId) => {\r\n    const { selectedProds } = this.state\r\n    const newList = _.includes(selectedProds, prodId) ? _.without(selectedProds, prodId) : [...selectedProds, prodId]\r\n    this.setState({ selectedProds: newList })\r\n  }\r\n  filterDeptType = (type) => {\r\n    console.log('type > ', type)\r\n    const {visibleDeptTypes} = this.state\r\n    const newList = _.includes(visibleDeptTypes, type) ? _.without(visibleDeptTypes, type) : [...visibleDeptTypes, type]\r\n    this.setState({ visibleDeptTypes: newList })\r\n  }\r\n  moveProds = async (deptId) => {\r\n    const { selectedProds } = this.state\r\n    try {\r\n      await this.props.moveProds({\r\n        variables: {\r\n          to: deptId,\r\n          prodIds: selectedProds\r\n        }\r\n      })\r\n      selectedProds.forEach(id => this.selectProd(id))\r\n    } catch (err) {\r\n      console.log(err)\r\n    }\r\n  }\r\n  render() {\r\n    const {visibleDeptTypes} = this.state\r\n    const { refreshToken, allDepts: { loading, error, depts } } = this.props\r\n    return (\r\n      <Container text>\r\n        <NavBar\r\n          refreshToken={refreshToken}\r\n          visibleDeptTypes={visibleDeptTypes}\r\n          filterDeptType={this.filterDeptType}\r\n          moveProds={this.moveProds}\r\n        />\r\n        { loading ? <div>Загрузка</div> :\r\n          error ? <DataLoadErrorMessage dataTitle='DeptList' /> :\r\n          depts && <DeptList\r\n            depts={depts.filter(dept => _.includes(visibleDeptTypes, dept.type) ? true : false)}\r\n            selectProd={this.selectProd}\r\n          />\r\n        }\r\n      </Container>\r\n    )\r\n  }\r\n}\r\n\r\nexport default compose (\r\n  graphql( allDepts, { name: 'allDepts' }),\r\n  graphql( moveProds, {\r\n    name: 'moveProds',\r\n    options: {\r\n      update: (cache, { data: reponseData }) => {\r\n        const { prods, to }= reponseData.moveProds\r\n        const query = allDepts\r\n        const data = cache.readQuery({ query })\r\n        const allMovedProds = _(prods).groupBy('dept.id').reduce(\r\n          function(allMovedProds, prods, deptId) {\r\n            const dept = data.depts.find(d => d.id === deptId)\r\n            const deptMovedProds = _.intersectionBy(dept.prods, prods, 'id')\r\n            dept.prods = _.differenceBy(dept.prods, prods, 'id')\r\n            return [...allMovedProds, ...deptMovedProds]\r\n          }, []\r\n        )\r\n        console.log('allMovedProds > ', allMovedProds)\r\n        const dept = data.depts.find(d => d.id === to)\r\n        dept.prods = [...dept.prods, ...allMovedProds]\r\n        cache.writeQuery({ query, data })\r\n      },\r\n      // refetchQueries: ['allDepts']\r\n    }\r\n  })\r\n) (Store)\r\n","import React, { Component, Fragment } from 'react'\r\n\r\nimport { AUTH_TOKEN } from './constants'\r\nimport { isTokenExpired } from './utils/jwtHelper'\r\n\r\nimport { Query } from 'react-apollo'\r\nimport { me } from './graphql/user'\r\n\r\nimport LoginPage from './components/shared/LoginPage'\r\nimport Store from './components/Store';\r\n\r\nclass Root extends Component {\r\n\tstate = {\r\n\t\ttoken: this.props.token\r\n\t}\r\n\t //verify localStorage check\r\n\tcomponentDidMount() {\r\n\t\tthis.bootStrapData()\r\n\t}\r\n\tbootStrapData = () => {\r\n\t\ttry {\r\n\t\t\tconst token = localStorage.getItem(AUTH_TOKEN)\r\n\t\t\tif (token !== null && token !== undefined) {\r\n\t\t\t\tconst expired = isTokenExpired(token)\r\n\t\t\t\tif (!expired) {\r\n\t\t\t\t\tthis.setState({ token: token })\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.refreshToken(null)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} catch (e) {\r\n\t\t\t// maybe TODO - provide fatal error message\r\n\t\t \t console.log('')\r\n\t\t}\r\n\t}\r\n\trefreshToken = (token) => {\r\n\t\tif (token) {\r\n\t\t  \tlocalStorage.setItem(AUTH_TOKEN, token)\r\n\t\t} else {\r\n            localStorage.removeItem(AUTH_TOKEN)\r\n            this.props.client.resetStore()\r\n\t\t}\r\n\t\tthis.setState({ token })\r\n\t}\r\n\trender() {\r\n\t\tconst { token } = this.state\r\n\t\treturn (\r\n\t\t\t<Fragment>\r\n\t\t\t\t{ !token \r\n\t\t\t\t  ?\t<LoginPage refreshToken={this.refreshToken} />\r\n\t\t\t\t  : <Query query={me} >\r\n\t\t\t\t\t\t\t{({ loading, error, data }) => {\r\n\t\t\t\t\t\t\t\tif (loading) return null\r\n\t\t\t\t\t\t\t\tif (error) return `Error!: ${error.message}`\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<Store\r\n                    me={data.me}\r\n                    refreshToken={this.refreshToken}\r\n                  />\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t</Query> \r\n\t\t\t\t}\r\n\t\t\t</Fragment>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nexport default Root\r\n","// In production, we register a service worker to serve assets from local cache.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\r\n// cached resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\r\n// This link also includes instructions on opting out of this behavior.\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://goo.gl/SC7cgQ'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not local host. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the old content will have been purged and\r\n              // the fresh content will have been added to the cache.\r\n              // It's the perfect time to display a \"New content is\r\n              // available; please refresh.\" message in your web app.\r\n              console.log('New content is available; please refresh.');\r\n\r\n              // Execute callback\r\n              if (config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      if (\r\n        response.status === 404 ||\r\n        response.headers.get('content-type').indexOf('javascript') === -1\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport 'semantic-ui-css/semantic.min.css'\r\nimport App from './App'\r\nimport * as serviceWorker from './serviceWorker'\r\n\r\nimport ApolloClient from 'apollo-boost'\r\nimport { ApolloProvider } from 'react-apollo'\r\n\r\nimport { AUTH_TOKEN } from './constants'\r\n\r\n// @ts-ignore\r\nconst client = new ApolloClient({\r\n\t// uri: 'http://localhost:4000',\r\n\t// uri: 'https://now-advanced.now.sh',\r\n\turi: 'https://env-1542080.mircloud.ru',\r\n\trequest: (operation) => {\r\n\t\tconst token = localStorage.getItem(AUTH_TOKEN)\r\n\t\toperation.setContext({\r\n\t\t\theaders: {\r\n\t\t\t\tAuthorization: token ? `Bearer ${token}` : '',\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n})\r\n\r\nconst token = localStorage.getItem(AUTH_TOKEN)\r\n\r\nReactDOM.render(\r\n\t<ApolloProvider client={client}>\r\n\t\t<App\r\n      token={token}\r\n      client={client}\r\n    />\r\n\t</ApolloProvider>\r\n, document.getElementById('root'))\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register()  below. Note this comes with some pitfalls.\r\n// Learn more about service workers: http://bit.ly/CRA-PWA\r\nserviceWorker.unregister()\r\n"],"sourceRoot":""}